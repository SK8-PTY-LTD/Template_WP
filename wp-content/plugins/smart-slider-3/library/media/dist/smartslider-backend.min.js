function strip_tags(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");var i=/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,n=/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;return e.replace(n,"").replace(i,function(e,i){return t.indexOf("<"+i.toLowerCase()+">")>-1?e:""})}var NextendSmartSliderAdminStorage=function(){this.timelineManager=null,this.timelineControl=null,this.slide=null,this.frontend=null,this.generator=null,this.layerManager=null,this.history=null,this.oneSecWidth=200,this.oneSecMs=1e3,this.fps=20,this.pxToFrame=this.oneSecWidth/this.fps,this.$currentSlideElement=null};NextendSmartSliderAdminStorage.prototype.durationToOffsetX=function(e){return e*this.oneSecWidth},NextendSmartSliderAdminStorage.prototype.offsetXToDuration=function(e){return e/this.oneSecWidth},NextendSmartSliderAdminStorage.prototype.normalizeOffsetX=function(e){return Math.round(e/this.pxToFrame)*this.pxToFrame},NextendSmartSliderAdminStorage.prototype.startEditor=function(e,t,i,n,a,s){return null===this.slide&&window[e].started(function(){new SmartSliderAdminSlide(e,t,i,n,a,s)}),this.slide},window.nextend.pre="div#n2-ss-0 ",window.nextend.smartSlider=new NextendSmartSliderAdminStorage,function(e,t,i){function n(){this.type="backgroundanimation",NextendVisualManagerMultipleSelection.prototype.constructor.apply(this,arguments)}n.prototype=Object.create(NextendVisualManagerMultipleSelection.prototype),n.prototype.constructor=n,n.prototype.loadDefaults=function(){NextendVisualManagerMultipleSelection.prototype.loadDefaults.apply(this,arguments),this.type="backgroundanimation",this.labels={visual:"Background animation",visuals:"Background animations"}},n.prototype.initController=function(){return new NextendBackgroundAnimationEditorController},n.prototype.createVisual=function(e,t){return new NextendVisualWithSetRowMultipleSelection(e,t,this)},i.NextendBackgroundAnimationManager=n}(nextend.smartSlider,n2,window),function(e,t){function i(){this.parameters={shiftedBackgroundAnimation:0},NextendVisualEditorController.prototype.constructor.call(this,!1),this.bgAnimationElement=e(".n2-bg-animation"),this.slides=e(".n2-bg-animation-slide"),this.bgImages=e(".n2-bg-animation-slide-bg"),NextendTween.set(this.bgImages,{rotationZ:1e-4}),this.directionTab=new NextendElementRadio("n2-background-animation-preview-tabs",["0","1"]),this.directionTab.element.on("nextendChange.n2-editor",e.proxy(this.directionTabChanged,this)),nModernizr.csstransforms3d&&nModernizr.csstransformspreserve3d||nextend.notificationCenter.error("Background animations are not available in your browser. It works if the <i>transform-style: preserve-3d</i> feature available. ")}i.prototype=Object.create(NextendVisualEditorController.prototype),i.prototype.constructor=i,i.prototype.loadDefaults=function(){NextendVisualEditorController.prototype.loadDefaults.call(this),this.type="backgroundanimation",this.current=0,this.animationProperties=!1,this.direction=0},i.prototype.get=function(){return null},i.prototype.load=function(e,t,i,n){this.lightbox.addClass("n2-editor-loaded")},i.prototype.setTabs=function(e){},i.prototype.directionTabChanged=function(){this.direction=parseInt(this.directionTab.element.val())},i.prototype.start=function(){this.animationProperties&&(this.timeline?this.timeline.play():this.next())},i.prototype.pause=function(){this.timeline&&this.timeline.pause()},i.prototype.next=function(){this.timeline=new NextendTimeline({paused:!0,onComplete:e.proxy(this.ended,this)});var t=this.bgImages.eq(this.current),i=this.bgImages.eq(1-this.current);nModernizr.csstransforms3d&&nModernizr.csstransformspreserve3d?(this.currentAnimation=new window["NextendSmartSliderBackgroundAnimation"+this.animationProperties.type](this,t,i,this.animationProperties,1,this.direction),this.slides.eq(this.current).css("zIndex",2),this.slides.eq(1-this.current).css("zIndex",3),this.timeline.to(this.slides.eq(this.current),.5,{opacity:0},this.currentAnimation.getExtraDelay()),this.timeline.to(this.slides.eq(1-this.current),.5,{opacity:1},this.currentAnimation.getExtraDelay()),this.currentAnimation.postSetup()):(this.timeline.to(this.slides.eq(this.current),1.5,{opacity:0},0),this.timeline.to(this.slides.eq(1-this.current),1.5,{opacity:1},0)),this.current=1-this.current,this.timeline.play()},i.prototype.ended=function(){this.currentAnimation&&this.currentAnimation.ended(),this.next()},i.prototype.setAnimationProperties=function(e){var t=this.animationProperties;this.animationProperties=e,t||this.next()},t.NextendBackgroundAnimationEditorController=i}(n2,window),function(e,t){function i(t){this.createSliderModal=null,this.ajaxUrl=t,e(".n2-ss-create-slider").click(e.proxy(function(e){e.preventDefault(),e.stopImmediatePropagation(),this.showModal()},this)),this.notificationStack=new NextendNotificationCenterStackModal(e("body")),e(".n2-ss-demo-slider").click(e.proxy(function(e){e.preventDefault(),e.stopImmediatePropagation(),this.showDemoSliders()},this)),"createslider"==window.location.hash.substring(1)&&this.showModal()}i.prototype.showModal=function(){if(!this.createSliderModal){var t=this,i=this.ajaxUrl,n=[];n.push({key:"default",name:n2_("Default"),image:"$ss$/admin/images/sliderpresets/default.png"}),n.push({key:"thumbnailhorizontal",name:n2_("Thumbnail - horizontal"),image:"$ss$/admin/images/sliderpresets/thumbnailhorizontal.png"}),n.push({key:"caption",name:n2_("Caption"),image:"$ss$/admin/images/sliderpresets/caption.png"}),this.createSliderModal=new NextendModal({zero:{size:[N2SSPRO?750:550,N2SSPRO?630:520],title:n2_("Create Slider"),back:!1,close:!0,content:'<form class="n2-form"></form>',controls:['<a href="#" class="n2-button n2-button-big n2-button-green n2-uc n2-h4">'+n2_("Create")+"</a>"],fn:{show:function(){var a=this.controls.find(".n2-button-green"),s=this.content.find(".n2-form").on("submit",function(e){e.preventDefault(),a.trigger("click")});s.append(this.createInput(n2_("Slider name"),"slidertitle","width: 240px;")),s.append(this.createInputUnit(n2_("Width"),"sliderwidth","px","width: 30px;")),s.append(this.createInputUnit(n2_("Height"),"sliderheight","px","width: 30px;")),new NextendElementAutocompleteSimple("sliderwidth",["1920","1400","1000","800","600","400"]),new NextendElementAutocompleteSimple("sliderheight",["800","600","500","400","300","200"]);var r=e("#slidertitle").val(n2_("Slider")).focus(),o=e("#sliderwidth").val(900),l=e("#sliderheight").val(500);o.parent().addClass("n2-form-element-autocomplete ui-front"),l.parent().addClass("n2-form-element-autocomplete ui-front"),this.createHeading(n2_("Preset")).appendTo(this.content);var d=this.createImageRadio(n).css("height",N2SSPRO?360:100).appendTo(this.content),p=d.find("input");d.css("overflow","hidden"),this.createHeading(n2_("Import Sample Sliders")).appendTo(this.content),e('<div class="n2-ss-create-slider-free-sample" style="background-image: url(\''+nextend.imageHelper.fixed("$ss$/admin/images/free/sample1.png")+'\')"></div><div class="n2-ss-create-slider-free-sample" style="background-image: url(\''+nextend.imageHelper.fixed("$ss$/admin/images/free/sample2.png")+'\')"></div><div class="n2-ss-create-slider-free-sample" style="background-image: url(\''+nextend.imageHelper.fixed("$ss$/admin/images/free/sample3.png")+"')\"></div>").on("click",e.proxy(function(){this.hide(),t.showDemoSliders()},this)).appendTo(this.content),a.on("click",e.proxy(function(){NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(i,{nextendaction:"create"}),data:{sliderTitle:r.val(),sliderSizeWidth:o.val(),sliderSizeHeight:l.val(),preset:p.val()},dataType:"json"}).done(e.proxy(function(e){NextendAjaxHelper.startLoading()},this))},this))}}}})}this.createSliderModal.show()},i.prototype.showDemoSliders=function(){var t=this;e("body").css("overflow","hidden");var i=0,n=e('<iframe src="//smartslider3.com/demo-import/?pro='+i+"&utm_campaign="+N2SS3C+"&utm_source=import-slider-frame&utm_medium=smartslider-"+N2PLATFORM+"-"+(i?"pro":"free")+'" frameborder="0"></iframe>').css({position:"fixed",zIndex:1e5,left:0,top:0,width:"100%",height:"100%"}).appendTo("body"),a=function(){e("body").css("overflow",""),n.remove(),window.removeEventListener("message",r,!1),t.notificationStack.popStack()},s=function(e){NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(t.ajaxUrl,{nextendaction:"importDemo"}),data:{key:Base64.encode(e.replace(/^(http(s)?:)?\/\//,"//"))},dataType:"json"}).fail(function(){})},r=function(e){if("http://smartslider3.com"===e.origin||"https://smartslider3.com"===e.origin){var t=e.data;switch(t.key){case"importSlider":return void("function"==typeof nextend.joinCommunity?nextend.joinCommunity(function(){s(t.data.href)}):s(t.data.href));case"closeWindow":a()}}};this.notificationStack.enableStack(),NextendEsc.add(e.proxy(function(){return a(),!0},this)),window.addEventListener("message",r,!1)},t.NextendSmartSliderCreateSlider=i}(n2,window),Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(void 0===this||null===this)throw new TypeError;var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError;for(var n=[],a=arguments[1],s=0;i>s;s++)if(s in t){var r=t[s];e.call(a,r,s,t)&&n.push(r)}return n}),function(e,t,i){function n(){this.$input=e('<input type="text" name="name" />').on({mouseup:function(e){e.stopPropagation()},keyup:e.proxy(function(e){27==e.keyCode&&this.cancel()},this),blur:e.proxy(this.save,this)}),this.$form=e('<form class="n2-inline-form"></form>').append(this.$input).on("submit",e.proxy(this.save,this))}n.prototype.injectNode=function(e,t){this.$input.val(t),e.append(this.$form),this.$input.focus()},n.prototype.save=function(e){e.preventDefault(),this.$input.trigger("valueChanged",[this.$input.val()]),this.$input.off("blur"),this.destroy()},n.prototype.cancel=function(){this.$input.trigger("cancel"),this.destroy()},n.prototype.destroy=function(){this.$input.off("blur"),this.$form.remove()},t.NextendSmartSliderAdminInlineField=n}(n2,window),function(e,t,i,n){"use strict";function a(){this.historyStates=50,this.isEnabled=0!=this.historyStates,this.historyAddAllowed=!0,this.isBatched=!1,this.index=-1,this.history=[],this.preventUndoRedo=!1,this.undoBTN=t("#n2-ss-undo").on("click",t.proxy(this.undo,this)),this.redoBTN=t("#n2-ss-redo").on("click",t.proxy(this.redo,this)),this.updateUI()}a.prototype.updateUI=function(){0==this.index||0==this.history.length?this.undoBTN.removeClass("n2-active"):this.undoBTN.addClass("n2-active"),-1==this.index||this.index>=this.history.length?this.redoBTN.removeClass("n2-active"):this.redoBTN.addClass("n2-active")},a.prototype.throttleUndoRedo=function(){return this.preventUndoRedo?!0:(this.preventUndoRedo=!0,setTimeout(t.proxy(function(){this.preventUndoRedo=!1},this),100),!1)},a.prototype.add=function(e){this.isEnabled&&this.historyAddAllowed&&(-1!=this.index&&this.history.splice(this.index,this.history.length),this.index=-1,this.isBatched?this.history[this.history.length-1].push(e()):(this.history.push([e()]),this.isBatched=!0,setTimeout(t.proxy(function(){this.isBatched=!1},this),100)),this.history.length>this.historyStates&&this.history.unshift(),this.updateUI())},a.prototype.off=function(){this.historyAddAllowed=!1},a.prototype.on=function(){this.historyAddAllowed=!0},a.prototype.undo=function(e){if(e&&e.preventDefault(),this.throttleUndoRedo())return!1;if(this.off(),-1==this.index?this.index=this.history.length-1:this.index--,this.index>=0)for(var t=this.history[this.index],i=t.length-1;i>=0;i--){var n=t[i];n[0].history(n[1],n[3],n[4],n)}else this.index=0;this.on(),this.updateUI()},a.prototype.redo=function(e){if(e&&e.preventDefault(),this.throttleUndoRedo())return!1;if(this.off(),-1!=this.index&&this.index<this.history.length){var t=this.history[this.index];this.index++;for(var i=0;i<t.length;i++){var n=t[i];n[0].history(n[1],n[2],n[4],n)}}this.on(),this.updateUI()},a.prototype.changeFuture=function(e,t){for(var i=0;i<this.history.length;i++)for(var n=0;n<this.history[i].length;n++){this.history[i][n][0]===e&&(this.history[i][n][0]=t);for(var a=0;a<this.history[i][n][4].length;a++)this.history[i][n][4][a]===e&&(this.history[i][n][4][a]=t)}},n2(window).ready(function(){e.history=new a})}(nextend.smartSlider,n2,window),function(e,t,i){function n(t){var i=e("#n2-quick-slides-edit");i.length<1||(this.ajaxUrl=t,i.on("click",e.proxy(this.openEdit,this)))}n.prototype.openEdit=function(t){t.preventDefault();var i=e("#n2-ss-slides .n2-box-slide"),n=this;this.modal=new NextendModal({zero:{fit:!0,fitX:!1,overflow:"auto",size:[1200,700],title:n2_("Quick Edit - Slides"),back:!1,close:!0,content:'<form class="n2-form"><table></table></form>',controls:['<a href="#" class="n2-button n2-button-big n2-button-green n2-uc n2-h4">'+n2_("Save")+"</a>"],fn:{show:function(){var t=this.controls.find(".n2-button-green"),a=this.content.find(".n2-form").on("submit",function(e){e.preventDefault(),t.trigger("click")}),s=a.find("table");i.each(e.proxy(function(t,i){var a=e(i),r=e("<tr />").appendTo(s),o=a.data("slideid");r.append(e("<td />").append('<img src="'+a.data("image")+'" style="width:100px;"/>')),r.append(e("<td />").append(n.createInput("Name","title-"+o,a.data("title"),"width: 240px;"))),r.append(e("<td />").append(n.createTextarea("Description","description-"+o,a.data("description"),"width: 330px;height:24px;")));var l=a.data("link").split("|*|");r.append(e("<td />").append(n.createLink("Link","link-"+o,l[0],"width: 180px;"))),r.append(e("<td />").append(n.createTarget("Target","target-"+o,l.length>1?l[1]:"_self",""))),new NextendElementUrl("link-"+o,nextend.NextendElementUrlParams)},this)),t.on("click",e.proxy(function(t){var a={};i.each(e.proxy(function(t,i){var n=e(i),s=n.data("slideid"),r=e("#title-"+s).val(),o=e("#description-"+s).val(),l=e("#link-"+s).val()+"|*|"+e("#target-"+s).val();r==n.data("title")&&o==n.data("description")&&l==n.data("link")||(a[s]={name:r,description:o,link:l})},this)),jQuery.isEmptyObject(a)?this.hide(t):(this.hide(t),NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(n.ajaxUrl),data:{changed:Base64.encode(JSON.stringify(a))},dataType:"json"}).done(e.proxy(function(t){var i=t.data;for(var n in i){var a=e('.n2-box-slide[data-slideid="'+n+'"]');a.find(".n2-box-placeholder a.n2-h4").html(i[n].title),a.attr("data-title",i[n].rawTitle),a.data("title",i[n].rawTitle),a.attr("data-description",i[n].rawDescription),a.data("description",i[n].rawDescription),a.attr("data-link",i[n].rawLink),a.data("link",i[n].rawLink)}},this)))},this))}}}}),this.modal.setCustomClass("n2-ss-quick-slides-edit-modal"),this.modal.show()},n.prototype.createInput=function(t,i,n){var a="";4==arguments.length&&(a=arguments[3]);var s=e('<div class="n2-form-element-mixed"><div class="n2-mixed-group"><div class="n2-mixed-label"><label for="'+i+'">'+t+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-text n2-border-radius"><input type="text" id="'+i+'" class="n2-h5" autocomplete="off" style="'+a+'"></div></div></div></div>');return s.find("input").val(n),s},n.prototype.createTextarea=function(t,i,n){var a="";4==arguments.length&&(a=arguments[3]);var s=e('<div class="n2-form-element-mixed"><div class="n2-mixed-group"><div class="n2-mixed-label"><label for="'+i+'">'+t+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-textarea n2-border-radius"><textarea id="'+i+'" class="n2-h5" autocomplete="off" style="resize:y;'+a+'"></textarea></div></div></div></div>');return s.find("textarea").val(n),s},n.prototype.createLink=function(t,i,n){var a="";4==arguments.length&&(a=arguments[3]);var s=e('<div class="n2-form-element-mixed"><div class="n2-mixed-group"><div class="n2-mixed-label"><label for="'+i+'">'+t+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-text n2-border-radius"><input type="text" id="'+i+'" class="n2-h5" autocomplete="off" style="'+a+'"><a href="#" class="n2-form-element-clear"><i class="n2-i n2-it n2-i-empty n2-i-grey-opacity"></i></a><a id="'+i+'_button" class="n2-form-element-button n2-h5 n2-uc" href="#">Link</a></div></div></div></div>');return s.find("input").val(n),s},n.prototype.createTarget=function(t,i,n){var a="";4==arguments.length&&(a=arguments[3]);var s=e('<div class="n2-form-element-mixed"><div class="n2-mixed-group"><div class="n2-mixed-label"><label for="'+i+'">'+t+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-list"><select id="'+i+'" autocomplete="off" style="'+a+'"><option value="_self">Self</option><option value="_blank">Blank</option></select</div></div></div></div>');return s.find("select").val(n),s},t.NextendSmartSliderQuickSlides=n}(n2,window),function(e,t,i){function n(t,i,n,s,r,o){this.quickPostModal=null,this.quickVideoModal=null,this.parameters=n,this.slides=[],this.ajaxUrl=t,this.contentAjaxUrl=i,this.slidesPanel=e("#n2-ss-slides"),this.slidesContainer=this.slidesPanel.find(".n2-ss-slides-container"),this.initSlidesOrderable();for(var l=this.slidesContainer.find(".n2-box-slide"),d=0;d<l.length;d++)this.slides.push(new a(this,l.eq(d)));if(this.slides.length>0&&this.slidesPanel.addClass("n2-ss-has-slides"),e(".n2-add-quick-image").on("click",e.proxy(this.addQuickImage,this)),e(".n2-box-slide-add").on("click",e.proxy(this.addQuickImage,this)),e(".n2-add-quick-video").on("click",e.proxy(this.addQuickVideo,this)),e(".n2-add-quick-post").on("click",e.proxy(this.addQuickPost,this)),this.initBulk(),0==e("#n2-ss-slide-editor-main-tab").length&&new NextendSmartSliderSidebarSlides,!s){var p=[];this.slidesContainer.fileupload({url:r,pasteZone:!1,dropZone:this.slidesContainer,dataType:"json",paramName:"image",add:e.proxy(function(e,t){t.formData={path:"/"+o},t.submit()},this),done:e.proxy(function(e,t){var i=t.result;i.data&&i.data.name?p.push({title:i.data.name,description:"",image:i.data.url}):NextendAjaxHelper.notification(i)},this),fail:e.proxy(function(e,t){NextendAjaxHelper.notification(t.jqXHR.responseJSON)},this),start:function(){NextendAjaxHelper.startLoading()},stop:e.proxy(function(){p.length?this._addQuickImages(p):setTimeout(function(){NextendAjaxHelper.stopLoading()},100),p=[]},this)});var h=null;this.slidesContainer.on("dragover",e.proxy(function(t){null!==h?(clearTimeout(h),h=null):this.slidesContainer.addClass("n2-drag-over"),h=setTimeout(e.proxy(function(){this.slidesContainer.removeClass("n2-drag-over"),h=null},this),400)},this))}}function a(t,i){this.selected=!1,this.manager=t,this.box=i.data("slide",this).addClass("n2-clickable"),this.normalMode(),this.box.find(".n2-slide-first").on("click",e.proxy(this.setFirst,this)),this.publishElement=this.box.find(".n2-slide-published").on("click",e.proxy(this.switchPublished,this)),this.box.find(".n2-slide-duplicate").on("click",e.proxy(this.duplicate,this)),this.box.find(".n2-slide-delete").on("click",e.proxy(this["delete"],this))}n.prototype.changed=function(){this.slides.length>0?this.slidesPanel.addClass("n2-ss-has-slides"):this.slidesPanel.removeClass("n2-ss-has-slides")},n.prototype.initSlidesOrderable=function(){this.slidesContainer.sortable({items:".n2-box-slide",tolerance:"pointer",stop:e.proxy(this.saveSlideOrder,this),helper:"clone",placeholder:"n2-box-placeholder n2-box"})},n.prototype.saveSlideOrder=function(t){for(var i=this.slidesContainer.find(".n2-box-slide"),n=[],a=[],s=[],r=0;r<i.length;r++){var o=i.eq(r).data("slide");n.push(o),a.push(o.getId())}for(var r=0;r<this.slides.length;r++)s.push(this.slides[r].getId());if(JSON.stringify(s)!=JSON.stringify(a)){e(window).triggerHandler("SmartSliderSidebarSlidesOrderChanged");var l={nextendcontroller:"slides",nextendaction:"order"};NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,l),data:{slideorder:a}}),this.slides=n,this.changed()}},n.prototype.initSlides=function(){for(var t=(this.slides.length,this.slidesContainer.find(".n2-box-slide")),i=[],n=0;n<t.length;n++){var a=t.eq(n).data("slide");i.push(a)}this.slides=i,this.changed(),e(window).triggerHandler("SmartSliderSidebarSlidesChanged")},n.prototype.unsetFirst=function(){for(var e=0;e<this.slides.length;e++)this.slides[e].unsetFirst();this.changed()},n.prototype.addQuickImage=function(t){t.preventDefault(),nextend.imageHelper.openMultipleLightbox(e.proxy(this._addQuickImages,this))},n.prototype._addQuickImages=function(t){NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"quickImages"}),data:{images:Base64.encode(JSON.stringify(t))}}).done(e.proxy(function(t){var i=e(t.data).insertBefore(this.slidesContainer.find(".n2-clear"));i.each(e.proxy(function(t,i){new a(this,e(i))},this)),this.initSlides()},this))},n.prototype.addQuickVideo=function(t){t.preventDefault();var i=this;this.quickVideoModal||(this.quickVideoModal=new NextendModal({zero:{size:[500,350],title:n2_("Add video"),back:!1,close:!0,content:'<form class="n2-form"></form>',controls:['<a href="#" class="n2-button n2-button-big n2-button-green n2-uc n2-h4">'+n2_("Add video")+"</a>"],fn:{show:function(){var t=this.controls.find(".n2-button"),n=(this.content.find(".n2-form").on("submit",function(e){e.preventDefault(),t.trigger("click")}).append(this.createInput(n2_("Video url"),"n2-slide-video-url","width: 446px;")),this.content.find("#n2-slide-video-url").focus());this.content.append(this.createHeading(n2_("Examples"))),this.content.append(this.createTable([["YouTube","https://www.youtube.com/watch?v=MKmIwHAFjSU"],["Vimeo","https://vimeo.com/144598279"]],["",""])),t.on("click",e.proxy(e.proxy(function(t){t.preventDefault();var a=n.val(),s=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,r=a.match(s),o=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,l=a.match(o),d=a.match(/\.(mp4|ogv|ogg|webm)/i);r?NextendAjaxHelper.getJSON("https://www.googleapis.com/youtube/v3/videos?id="+encodeURI(r[2])+"&part=snippet&key=AIzaSyC3AolfvPAPlJs-2FgyPJdEEKS6nbPHdSM").done(e.proxy(function(e){if(e.items.length){var t=e.items[0].snippet,n=e.items[0].snippet.thumbnails,s=n.maxres||n.standard||n.high||n.medium||n["default"];i._addQuickVideo(this,{type:"youtube",title:t.title,description:t.description,image:s.url,video:a})}},this)).fail(function(e){nextend.notificationCenter.error(e.error.errors[0].message)}):l?NextendAjaxHelper.getJSON("https://vimeo.com/api/v2/video/"+l[3]+".json").done(e.proxy(function(e){i._addQuickVideo(this,{type:"vimeo",title:e[0].title,description:e[0].description,video:l[3],image:e[0].thumbnail_large})},this)).fail(function(e){nextend.notificationCenter.error(e.responseText)}):d?nextend.notificationCenter.error("This video url is not supported!"):nextend.notificationCenter.error("This video url is not supported!")},this)))}}}})),this.quickVideoModal.show()},n.prototype._addQuickVideo=function(t,i){NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"quickVideo"}),data:{video:Base64.encode(JSON.stringify(i))}}).done(e.proxy(function(t){var i=e(t.data).insertBefore(this.slidesContainer.find(".n2-clear"));new a(this,i),this.initSlides()},this)),t.hide()},n.prototype.addQuickPost=function(t){if(t.preventDefault(),!this.quickPostModal){var i=this,n={},a=e.proxy(function(e){return"undefined"==typeof n[e]&&(n[e]=NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.contentAjaxUrl),data:{keyword:e},dataType:"json"})),n[e]},this);this.quickPostModal=new NextendModal({zero:{size:[600,430],title:n2_("Add post"),back:!1,close:!0,content:'<div class="n2-form"></div>',fn:{show:function(){this.content.find(".n2-form").append(this.createInput(n2_("Keyword"),"n2-ss-keyword","width:546px;"));var t=e("#n2-ss-keyword"),n=this.createHeading("").appendTo(this.content),s=this.createResult().appendTo(this.content),r="";t.on("keyup",e.proxy(function(){r=t.val(),a(r).done(e.proxy(function(a){if(t.val()==r){""==r?n.html(n2_("No search term specified. Showing recent items.")):n.html(n2_printf(n2_('Showing items match for "%s"'),r));for(var o=a.data,l=[],d=this,p=0;p<o.length;p++)l.push([o[p].title,o[p].info,e('<div class="n2-button n2-button-green n2-button-x-small n2-uc n2-h5">'+n2_("Select")+"</div>").on("click",{post:o[p]},function(e){i._addQuickPost(d,e.data.post)})]);s.html(""),this.createTable(l,["width:100%;","",""]).appendTo(this.createTableWrap().appendTo(s))}},this))},this)).trigger("keyup").focus()}}}})}this.quickPostModal.show()},n.prototype._addQuickPost=function(t,i){i.image||(i.image=""),NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"quickPost"}),data:{post:i}}).done(e.proxy(function(t){var i=e(t.data).insertBefore(this.slidesContainer.find(".n2-clear"));new a(this,i),this.initSlides()},this)),t.hide()},n.prototype.initBulk=function(){e(".n2-slides-bulk").on("click",e.proxy(this.enterBulk,this)),e(".n2-bulk-cancel").on("click",e.proxy(this.leaveBulk,this));var t=e(".n2-bulk-select").find("a");t.eq(0).on("click",e.proxy(function(e){e.preventDefault(),this.bulkSelect(function(e){e.invertSelection()})},this)),t.eq(1).on("click",e.proxy(function(e){e.preventDefault(),this.bulkSelect(function(e){e.select()})},this)),t.eq(2).on("click",e.proxy(function(e){e.preventDefault(),this.bulkSelect(function(e){e.deSelect()})},this)),t.eq(3).on("click",e.proxy(function(e){e.preventDefault(),this.bulkSelect(function(e){e.publishElement.hasClass("n2-active")?e.select():e.deSelect()})},this)),t.eq(4).on("click",e.proxy(function(e){e.preventDefault(),this.bulkSelect(function(e){e.publishElement.hasClass("n2-active")?e.deSelect():e.select()})},this));var i=e(".n2-bulk-action").find("a");i.eq(0).on("click",e.proxy(function(e){e.preventDefault(),this.bulkAction("deleteSlides")},this)),i.eq(1).on("click",e.proxy(function(e){e.preventDefault(),this.bulkAction("duplicateSlides")},this)),i.eq(2).on("click",e.proxy(function(e){e.preventDefault(),this.bulkAction("publishSlides")},this)),i.eq(3).on("click",e.proxy(function(e){e.preventDefault(),this.bulkAction("unPublishSlides")},this))},n.prototype.bulkSelect=function(e){for(var t=0;t<this.slides.length;t++)e(this.slides[t])},n.prototype.bulkAction=function(e){var t=[],i=[];this.bulkSelect(function(e){e.selected&&(t.push(e),i.push(e.getId()))}),i.length?this[e](i,t):nextend.notificationCenter.notice("Please select one or more slides for the action!")},n.prototype.enterBulk=function(){this.slidesContainer.sortable("option","disabled",!0),e("#n2-admin").addClass("n2-slide-bulk-mode");for(var t=0;t<this.slides.length;t++)this.slides[t].selectMode()},n.prototype.leaveBulk=function(){this.slidesContainer.sortable("option","disabled",!1),e("#n2-admin").removeClass("n2-slide-bulk-mode");for(var t=0;t<this.slides.length;t++)this.slides[t].normalMode()},n.prototype.deleteSlides=function(t,i){var n=i[0].box.find(".n2-box-button a").text();i.length>1&&(n+=" and "+(i.length-1)+" more"),NextendDeleteModal("slide-delete",n,e.proxy(function(){NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"delete"}),type:"POST",data:{slides:t}}).done(e.proxy(function(){for(var e=0;e<i.length;e++)i[e].deleted();this.initSlides()},this))},this))},n.prototype.duplicateSlides=function(t,i){for(var n=0;n<this.slides.length;n++)this.slides[n].selected&&this.slides[n].duplicate(e.Event("click",{currentTarget:this.slides[n].box.find(".n2-slide-duplicate")})).done(function(e){e.selectMode()})},n.prototype.publishSlides=function(t,i){NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"publish"}),type:"POST",data:{slides:t}}).done(e.proxy(function(){for(var e=0;e<i.length;e++)i[e].published();this.changed()},this))},n.prototype.unPublishSlides=function(t,i){NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.ajaxUrl,{nextendaction:"unpublish"}),type:"POST",data:{slides:t}}).done(e.proxy(function(){for(var e=0;e<i.length;e++)i[e].unPublished();this.changed()},this))},t.NextendSmartSliderAdminSidebarSlides=n,a.prototype.getId=function(){return this.box.data("slideid")},a.prototype.setFirst=function(t){t.stopPropagation(),t.preventDefault(),NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(this.manager.ajaxUrl,{nextendaction:"first"}),type:"POST",data:{id:this.getId()}}).done(e.proxy(function(){this.manager.unsetFirst(),this.box.addClass("n2-first-slide")},this))},a.prototype.unsetFirst=function(){this.box.removeClass("n2-first-slide")},a.prototype.switchPublished=function(e){e.stopPropagation(),e.preventDefault(),this.isPublished()?this.manager.unPublishSlides([this.getId()],[this]):this.manager.publishSlides([this.getId()],[this])},a.prototype.isPublished=function(){return this.publishElement.hasClass("n2-active")},a.prototype.published=function(){this.publishElement.addClass("n2-active")},a.prototype.unPublished=function(){this.publishElement.removeClass("n2-active")},a.prototype.goToEdit=function(e,t){"A"!=e.target.tagName&&("undefined"!=typeof t&&t?window.open(this.box.data("editurl"),"_blank"):window.location=this.box.data("editurl"))},a.prototype.duplicate=function(t){t.stopPropagation(),t.preventDefault();var i=e.Deferred();return NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(e(t.currentTarget).attr("href"),{nextendaction:"duplicate"})}).done(e.proxy(function(t){var n=e(t.data).insertAfter(this.box),s=new a(this.manager,n);this.manager.initSlides(),i.resolve(s)},this)),i},a.prototype["delete"]=function(e){e.stopPropagation(),e.preventDefault(),this.manager.deleteSlides([this.getId()],[this])},a.prototype.deleted=function(){this.box.remove()},a.prototype.selectMode=function(){this.box.off(".n2-slide"),this.box.on("click.n2-slide",e.proxy(this.invertSelection,this))},a.prototype.normalMode=function(){this.box.off(".n2-slide"),this.box.on({"click.n2-slide":e.proxy(this.goToEdit,this),"mousedown.n2-slide":e.proxy(function(e){2!=e.which&&4!=e.which||(e.preventDefault(),this.goToEdit(e,!0))},this)}),this.deSelect()},a.prototype.invertSelection=function(e){e&&e.preventDefault(),this.selected?this.deSelect():this.select()},a.prototype.select=function(){this.selected=!0,this.box.addClass("n2-active")},a.prototype.deSelect=function(){this.selected=!1,this.box.removeClass("n2-active")},t.NextendSmartSliderAdminSlide=a}(n2,window),function(e,t,i,n){function a(){NextendAdminVerticalPane.prototype.constructor.call(this,t(".n2-layers-tab"),t("#n2-ss-layers-items-list").css("overflow","auto"),t("#n2-tabbed-layer-item-animation-tabs > .n2-tabs").css("overflow","auto")),e.sidebarManager=this,this.panelHeading=t("#layeritemeditorpanel").find(".n2-sidebar-tab-switcher .n2-td");var i=t("#n2-ss-slide-sidebar"),n=i.parent().siblings(".n2-td").offset().top-t("#wpadminbar, .navbar").height(),a=t.proxy(function(){t(window).scrollTop()>n?i.addClass("n2-sidebar-fixed"):i.removeClass("n2-sidebar-fixed")},this);this.lateInit(),t(window).scroll(a),a(),new s}function s(){var e=t("#n2-ss-slides");NextendAdminSinglePane.prototype.constructor.call(this,e,e.find(".n2-ss-slides-container").css("overflow","auto")),t(".n2-slides-tab-label").on("click.n2-slides-init",t.proxy(function(e){this.lateInit(),t(e.target).off("click.n2-slides-init")},this))}function r(){var e=t("#n2-ss-slides"),i=e.parents(".n2-sidebar-inner"),n=i.parent().siblings(".n2-td").offset().top-t("#wpadminbar, .navbar").height();t(window).scroll(t.proxy(function(){t(window).scrollTop()>n?i.addClass("n2-sidebar-fixed"):i.removeClass("n2-sidebar-fixed")},this)).trigger("scroll"),NextendAdminSinglePane.prototype.constructor.call(this,e,e.find(".n2-ss-slides-container").css("overflow","auto")),this.lateInit()}a.prototype=Object.create(NextendAdminVerticalPane.prototype),a.prototype.constructor=a,a.prototype.loadDefaults=function(){NextendAdminVerticalPane.prototype.loadDefaults.apply(this,arguments),this.key="smartsliderSlideSidebarRatio"},a.prototype.switchTab=function(e){this.panelHeading.eq(e).trigger("click")},a.prototype.getExcludedHeight=function(){
var e=0;return e+=t("#n2-ss-slide-editor-main-tab").outerHeight(),e+=t("#n2-ss-item-container").outerHeight(),e+=t("#n2-tabbed-layer-item-animation-tabs > .n2-labels").outerHeight(),e+=this.tab.find(".n2-sidebar-pane-sizer").outerHeight(),e+=1},i.NextendSmartSliderSidebar=a,s.prototype=Object.create(NextendAdminSinglePane.prototype),s.prototype.constructor=s,s.prototype.getExcludedHeight=function(){var e=0;return e+=t("#n2-ss-slide-editor-main-tab").outerHeight(),e+=t(".n2-slides-tab .n2-definition-list").outerHeight(!0),e+=2},i.NextendSmartSliderEditorSidebarSlides=s,r.prototype=Object.create(NextendAdminSinglePane.prototype),r.prototype.constructor=r,r.prototype.getExcludedHeight=function(){var e=0;return e+=t("#n2-ss-slide-editor-main-tab").outerHeight(),e+=t(".n2-sidebar .n2-definition-list").outerHeight(!0),e+=2},i.NextendSmartSliderSidebarSlides=r}(nextend.smartSlider,n2,window),function(e,t,i,n){function a(i,n,a,s,r,o){this.options=t.extend({slideAsFile:0},o),this.readyDeferred=t.Deferred(),e.slide=this,this._warnInternetExplorerUsers(),this.$slideContentElement=t("#"+n),this.slideStartValue=this.$slideContentElement.val(),this.$sliderElement=t("#"+i),e.frontend=window["n2-ss-0"];var l=this.$sliderElement.data("fontsize");nextend.fontManager.setFontSize(l),nextend.styleManager.setFontSize(l),e.$currentSlideElement=e.frontend.adminGetCurrentSlideElement(),new SmartSliderAdminGenerator,e.$currentSlideElement.addClass("n2-ss-currently-edited-slide");var d=e.frontend.parameters.isStaticEdited;new NextendSmartSliderAdminSlideLayerManager(e.$currentSlideElement.data("slide"),d,a,s,r),d||this._initializeBackgroundChanger(),this.readyDeferred.resolve(),t("#smartslider-form").on({checkChanged:t.proxy(this.prepareFormForCheck,this),submit:t.proxy(this.onSlideSubmit,this)}),this.createHistory()}a.prototype.ready=function(e){this.readyDeferred.done(e)},a.prototype.prepareFormForCheck=function(){var t=JSON.stringify(e.layerManager.getData()),i=JSON.stringify(JSON.parse(Base64.decode(this.slideStartValue)));this.$slideContentElement.val(i==t?this.slideStartValue:Base64.encode(t))},a.prototype.onSlideSubmit=function(e){if(!nextend.isPreview)if(this.prepareForm(),e.preventDefault(),nextend.askToSave=!1,this.options.slideAsFile&&typeof window.FormData!==n&&"undefined"!=typeof window.File){var i=new FormData,a=t("#smartslider-form").serializeArray();t.each(a,function(e,t){"slide[slide]"==t.name?i.append("slide",new File([t.value],"slide.txt")):i.append(t.name,t.value)}),NextendAjaxHelper.ajax({url:NextendAjaxHelper.makeAjaxUrl(window.location.href),type:"POST",data:i,contentType:!1,processData:!1}).done(function(){nextend.askToSave=!0,t("#smartslider-form").trigger("saved")})}else NextendAjaxHelper.ajax({type:"POST",url:NextendAjaxHelper.makeAjaxUrl(window.location.href),data:t("#smartslider-form").serialize(),dataType:"json"}).done(function(){nextend.askToSave=!0,t("#smartslider-form").trigger("saved")})},a.prototype.prepareForm=function(){this.$slideContentElement.val(Base64.encode(JSON.stringify(e.layerManager.getData())))},a.prototype._initializeBackgroundChanger=function(){this.background={slideBackgroundColorField:t("#slidebackgroundColor"),slideBackgroundImageField:t("#slidebackgroundImage"),slideBackgroundImageOpacity:t("#slidebackgroundImageOpacity"),slidebackgroundFocusX:t("#slidebackgroundFocusX"),slidebackgroundFocusY:t("#slidebackgroundFocusY"),slideBackgroundModeField:t("#slidebackgroundMode"),backgroundImageElement:e.$currentSlideElement.find(".nextend-slide-bg"),canvas:e.$currentSlideElement.find(".n2-ss-slide-background")},this.background.slideBackgroundColorField.on("nextendChange",t.proxy(this.__onAfterBackgroundColorChange,this)),this.background.slideBackgroundImageField.on("nextendChange",t.proxy(this.__onAfterBackgroundImageChange,this)),this.background.slideBackgroundImageOpacity.on("nextendChange",t.proxy(this.__onAfterBackgroundImageOpacityChange,this)),this.background.slideBackgroundModeField.on("nextendChange",t.proxy(this.__onAfterBackgroundImageChange,this)),this.background.slidebackgroundFocusX.on("nextendChange",t.proxy(this.__onAfterBackgroundImageChange,this)),this.background.slidebackgroundFocusY.on("nextendChange",t.proxy(this.__onAfterBackgroundImageChange,this));var i=t("#slidethumbnail");if(""==i.val()){var n=t("#item_imageimage"),a=t.proxy(function(e){""!=e&&"$system$/images/placeholder/image.png"!=e&&(i.val(e).trigger("change"),this.background.slideBackgroundImageField.off(".slidethumbnail"),n.off(".slidethumbnail"))},this);this.background.slideBackgroundImageField.on("nextendChange.slidethumbnail",t.proxy(function(){a(this.background.slideBackgroundImageField.val())},this)),n.on("nextendChange.slidethumbnail",t.proxy(function(){a(n.val())},this))}},a.prototype.__onAfterBackgroundColorChange=function(){var e=this.background.slideBackgroundColorField.val();"00"==e.substr(6,8)?this.background.canvas.css("background",""):this.background.canvas.css("background","#"+e.substr(0,6)).css("background",N2Color.hex2rgbaCSS(e))},a.prototype.__onAfterBackgroundImageOpacityChange=function(){e.$currentSlideElement.data("slideBackground").setOpacity(this.background.slideBackgroundImageOpacity.val()/100)},a.prototype.__onAfterBackgroundImageChange=function(){e.$currentSlideElement.data("slideBackground").changeDesktop(e.generator.fill(this.background.slideBackgroundImageField.val()),"",this.background.slideBackgroundModeField.val(),this.background.slidebackgroundFocusX.val(),this.background.slidebackgroundFocusY.val()),this.__onAfterBackgroundImageOpacityChange()},a.prototype._warnInternetExplorerUsers=function(){var e=this.__isInternetExplorer();e&&10>e&&alert(window.ss2lang.The_editor_was_tested_under_Internet_Explorer_10_Firefox_and_Chrome_Please_use_one_of_the_tested_browser)},a.prototype.__isInternetExplorer=function(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("msie")?parseInt(e.split("msie")[1]):!1},a.prototype.getLayout=function(){for(var i=t("#smartslider-form").serializeArray(),n={},a=0;a<i.length;a++){var s=i[a].name.match(/slide\[(.*?)\]/);s&&(n[s[1]]=i[a].value)}return delete n.generator,delete n.published,delete n.publishdates,delete n["record-start"],delete n["record-slides"],delete n.slide,n.slide=e.layerManager.getData(),n},a.prototype.loadLayout=function(i,n,a){var s=i.slide;if(delete i.slide,a?e.layerManager.loadData(s,!0):e.layerManager.loadData(s,!1),n)for(var r in i)t("#slide"+r).val(i[r]).trigger("change");i.slide=s},a.prototype.createHistory=function(){this.slideValues={},n2("#smartslider-form").find('input[id][name^="slide"], textarea[id][name^="slide"]').not("#slideslide").each(t.proxy(function(i,n){var a=t(n),s=a.data("field"),r=a.attr("id");this.slideValues[r]=a.val(),a.on("nextendChange",t.proxy(function(){var i=a.val(),n=this.slideValues[r];this.slideValues[r]=i,e.history.add(t.proxy(function(){return[this,"slideValueChange",i,n,[a,s]]},this))},this))},this))},a.prototype.history=function(e,t,i){switch(e){case"slideValueChange":i[1].insideChange(t)}},i.SmartSliderAdminSlide=a}(nextend.smartSlider,n2,window),function(e,t,i,n){function a(e){this.key="n2-ss-editor-device-lock-mode",this.devices={unknownUnknown:t("<div />")},this.responsive=e,this.responsive.setOrientation("portrait"),this.responsive.parameters.onResizeEnabled=0,this.responsive.parameters.forceFull=0,this.responsive._getDevice=this.responsive._getDeviceZoom,this.lock=t("#n2-ss-lock").on("click",t.proxy(this.switchLock,this));var i=e.parameters.sliderWidthToDevice.desktopPortrait;this.container=this.responsive.containerElement.closest(".n2-ss-container-device").addBack(),this.container.width(i),this.containerWidth=i,this.initZoom();var n=t("#n2-ss-devices .n2-tr"),a=e.parameters.deviceModes;this.devices.desktopPortrait=t('<div class="n2-td n2-panel-option" data-device="desktop" data-orientation="portrait"><i class="n2-i n2-it n2-i-v-desktop"></i></div>').appendTo(n),a.desktopLandscape?this.devices.desktopLandscape=t('<div class="n2-td n2-panel-option" data-device="desktop" data-orientation="landscape"><i class="n2-i n2-it n2-i-v-desktop-landscape"></i></div>').appendTo(n):this.devices.desktopLandscape=this.devices.desktopPortrait,a.tabletPortrait?this.devices.tabletPortrait=t('<div class="n2-td n2-panel-option" data-device="tablet" data-orientation="portrait"><i class="n2-i n2-it n2-i-v-tablet"></i></div>').appendTo(n):this.devices.tabletPortrait=this.devices.desktopPortrait,a.tabletLandscape?this.devices.tabletLandscape=t('<div class="n2-td n2-panel-option" data-device="tablet" data-orientation="landscape"><i class="n2-i n2-it n2-i-v-tablet-landscape"></i></div>').appendTo(n):this.devices.tabletLandscape=this.devices.desktopLandscape,a.mobilePortrait?this.devices.mobilePortrait=t('<div class="n2-td n2-panel-option" data-device="mobile" data-orientation="portrait"><i class="n2-i n2-it n2-i-v-mobile"></i></div>').appendTo(n):this.devices.mobilePortrait=this.devices.tabletPortrait,a.mobileLandscape?this.devices.mobileLandscape=t('<div class="n2-td n2-panel-option" data-device="mobile" data-orientation="landscape"><i class="n2-i n2-it n2-i-v-mobile-landscape"></i></div>').appendTo(n):this.devices.mobileLandscape=this.devices.tabletLandscape,this.deviceOptions=t("#n2-ss-devices .n2-panel-option"),t("#n2-ss-devices").css("width",62*this.deviceOptions.length+"px"),this.deviceOptions.each(t.proxy(function(e,i){t(i).on("click",t.proxy(this.setDeviceMode,this))},this)),e.sliderElement.on("SliderDeviceOrientation",t.proxy(this.onDeviceOrientationChange,this))}nextend.ssBeforeResponsive=function(){new a(this)},a.prototype.onDeviceOrientationChange=function(e,i){t("#n2-admin").removeClass("n2-ss-mode-"+i.lastDevice).addClass("n2-ss-mode-"+i.device),this.devices[i.lastDevice+i.lastOrientation].removeClass("n2-active"),this.devices[i.device+i.orientation].addClass("n2-active")},a.prototype.setDeviceMode=function(i){var n=t(i.currentTarget);if((i.ctrlKey||i.metaKey)&&e.layerManager){var a=n.data("orientation");e.layerManager.copyOrResetMode(n.data("device")+a[0].toUpperCase()+a.substr(1))}else this.responsive.setOrientation(n.data("orientation")),this.responsive.setMode(n.data("device"))},a.prototype.switchLock=function(e){e.preventDefault(),this.lock.toggleClass("n2-active"),this.lock.hasClass("n2-active")?(this.setZoomSyncMode(),this.zoomChange(this.zoom.slider("value"),"sync",!1),t.jStorage.set(this.key,"sync")):(this.setZoomFixMode(),t.jStorage.set(this.key,"fix"))},a.prototype.initZoom=function(){var e=t("#n2-ss-slider-zoom");if(e.length>0){"undefined"!=typeof e[0].slide&&(e[0].slide=null),this.zoom=e.slider({range:"min",step:1,value:1,min:0,max:102}),this.responsive.sliderElement.on("SliderResize",t.proxy(this.sliderResize,this)),"fix"==t.jStorage.get(this.key,"sync")?this.setZoomFixMode():(this.setZoomSyncMode(),this.lock.addClass("n2-active"));var i=e.parent(),n=t.proxy(function(e){var t=this.zoom.slider("value");this.zoom.slider("value",t+e)},this),a=null,s=t.proxy(function(e){n(e),a=setInterval(t.proxy(n,this,e),40)},this);i.find(".n2-i-minus").on({mousedown:t.proxy(s,this,-1),mouseup:function(e){console.log(e)},"mouseup mouseleave":function(){a&&(clearInterval(a),a=null)}}),i.find(".n2-i-plus").on({mousedown:t.proxy(s,this,1),"mouseup mouseleave":function(){a&&(clearInterval(a),a=null)}})}},a.prototype.sliderResize=function(e,t){this.setZoom()},a.prototype.setZoomFixMode=function(){this.zoom.off(".n2-ss-zoom").on({"slide.n2-ss-zoom":t.proxy(this.zoomChangeFixMode,this),"slidechange.n2-ss-zoom":t.proxy(this.zoomChangeFixMode,this)})},a.prototype.setZoomSyncMode=function(){this.zoom.off(".n2-ss-zoom").on({"slide.n2-ss-zoom":t.proxy(this.zoomChangeSyncMode,this),"slidechange.n2-ss-zoom":t.proxy(this.zoomChangeSyncMode,this)})},a.prototype.zoomChangeFixMode=function(e,t){this.zoomChange(t.value,"fix",t)},a.prototype.zoomChangeSyncMode=function(e,t){this.zoomChange(t.value,"sync",t)},a.prototype.zoomChange=function(e,t,i){var n=1;50>e?n=nextend.smallestZoom/this.containerWidth+Math.max(e/50,0)*(1-nextend.smallestZoom/this.containerWidth):e>52&&(n=1+(e-52)/50);var a=parseInt(n*this.containerWidth);switch(this.container.width(a),t){case"sync":this.responsive.doResize();break;default:this.responsive.doResize(!0)}i&&(i.handle.innerHTML=a+"px")},a.prototype.setZoom=function(){var e=this.responsive.containerElement.width()/this.containerWidth,t=50;1>e?t=(e-nextend.smallestZoom/this.containerWidth)/(1-nextend.smallestZoom/this.containerWidth)*50:e>1&&(t=50*(e-1)+52);this.zoom.slider("value");this.zoom.slider("value",t)}}(nextend.smartSlider,n2,window),function(e,t){function i(t,i){this.element=e("#"+t),this.managerIdentifier=i,this.element.parent().on("click",e.proxy(this.show,this)),this.element.siblings(".n2-form-element-clear").on("click",e.proxy(this.clear,this)),this.name=this.element.siblings("input"),this.updateName(this.element.val()),NextendElement.prototype.constructor.apply(this,arguments)}function n(){i.prototype.constructor.apply(this,arguments)}i.prototype=Object.create(NextendElement.prototype),i.prototype.constructor=i,i.prototype.show=function(t){t.preventDefault(),nextend[this.managerIdentifier].show(this.element.val(),e.proxy(this.save,this))},i.prototype.clear=function(e){e.preventDefault(),e.stopPropagation(),this.val("")},i.prototype.save=function(e,t){this.val(t)},i.prototype.val=function(e){this.element.val(e),this.updateName(e),this.triggerOutsideChange()},i.prototype.insideChange=function(e){this.element.val(e),this.updateName(e),this.triggerInsideChange()},i.prototype.updateName=function(e){e=""==e?n2_("Disabled"):e.split("||").length>1?n2_("Multiple animations"):n2_("Single animation"),this.name.val(e)},t.NextendElementAnimationManager=i,n.prototype=Object.create(i.prototype),n.prototype.constructor=n,n.prototype.clear=function(e){e.preventDefault(),e.stopPropagation();var t=this.element.val().split("|*|");t[2]="",this.val(t.join("|*|"))},n.prototype.updateName=function(e){var t=e.split("|*|");e=t[2],e=""==e?n2_("Disabled"):e.split("||").length>1?n2_("Multiple animations"):n2_("Single animation"),this.name.val(e)},t.NextendElementPostAnimationManager=n}(n2,window),function(e,t){function i(t){this.status=0,this.element=e("#"+t),this.overlays=null,this.aligns=this.element.parent().parent().siblings(),this.globalPicker=e("#n2-ss-parent-linker"),this.picker=this.element.siblings(".n2-ss-layer-picker").on({click:e.proxy(this.click,this),mouseenter:e.proxy(function(){var t=this.element.val();""!=t&&e("#"+t).addClass("n2-highlight")},this),mouseleave:e.proxy(function(){var t=this.element.val();""!=t&&e("#"+t).removeClass("n2-highlight")},this)}),NextendElement.prototype.constructor.apply(this,arguments)}var n={INITIALIZED:0,UNDER_PICK_PARENT:1,UNDER_PICK_CHILD:2},a='<div class="n2-ss-picker-overlay" data-align="left" data-valign="top" /><div class="n2-ss-picker-overlay" data-align="center" data-valign="top" style="left:33%;top:0;" /><div class="n2-ss-picker-overlay" data-align="right" data-valign="top" style="left:66%;top:0;width:34%;" /><div class="n2-ss-picker-overlay" data-align="left" data-valign="middle" style="left:0;top:33%;" /><div class="n2-ss-picker-overlay" data-align="center" data-valign="middle" style="left:33%;top:33%; " /><div class="n2-ss-picker-overlay" data-align="right" data-valign="middle" style="left:66%;top:33%;width:34%;" /><div class="n2-ss-picker-overlay" data-align="left" data-valign="bottom" style="left:0;top:66%;height:34%;" /><div class="n2-ss-picker-overlay" data-align="center" data-valign="bottom" style="left:33%;top:66%;height:34%;" /><div class="n2-ss-picker-overlay" data-align="right" data-valign="bottom" style="left:66%;top:66%;width:34%;height:34%;" />';i.prototype=Object.create(NextendElement.prototype),i.prototype.constructor=i,i.prototype.click=function(t){if(this.status==n.INITIALIZED){e("body").on("mousedown.n2-ss-parent-linker",e.proxy(function(t){var i=e(t.target),n=i.parent();i.hasClass("n2-ss-picker-overlay")||n.hasClass("n2-under-pick")||this.endSelection()},this));var i=nextend.activeLayer.parent().find(".n2-ss-layer").not(nextend.activeLayer),s=function(t){i.each(function(){var n=e(this),a=n.data("layerObject");if(a.getProperty(!1,"parentid")==t){i=i.not(n);var r=a.getProperty(!1,"id");r&&""!=r&&s(r)}})},r=nextend.activeLayer.data("layerObject").getProperty(!1,"id");r&&""!=r&&s(r),i.length>0&&(this.globalPicker.addClass("n2-under-pick"),this.picker.addClass("n2-under-pick"),i.addClass("n2-ss-picking-on-layer"),this.overlays=e(a).appendTo(i),this.overlays.on("mousedown",e.proxy(function(t){var s=e(t.currentTarget),r=s.data("align"),o=s.data("valign"),l=s.parent().data("layerObject");this.status=n.UNDER_PICK_CHILD,this.overlays.remove(),i.removeClass("n2-ss-picking-on-layer"),nextend.activeLayer.addClass("n2-ss-picking-on-layer"),this.overlays=e(a).appendTo(nextend.activeLayer),this.overlays.on("mousedown",e.proxy(function(t){var i=e(t.currentTarget),n=i.data("align"),a=i.data("valign");nextend.activeLayer.removeClass("n2-ss-picking-on-layer"),nextend.activeLayer.data("layerObject").parentPicked(l,r,o,n,a),t.preventDefault(),t.stopPropagation(),this.endSelection()},this)),t.preventDefault(),t.stopPropagation()},this)),NextendEsc.add(e.proxy(function(){return this.endSelection(),!1},this)),this.status=n.UNDER_PICK_PARENT)}else this.status==n.UNDER_PICK_PARENT?(this.change(""),this.endSelection()):this.status==n.UNDER_PICK_CHILD&&(this.change(""),this.endSelection())},i.prototype.endSelection=function(){e("body").off("mousedown.n2-ss-parent-linker"),nextend.activeLayer.parent().find(".n2-ss-layer").removeClass("n2-ss-picking-on-layer"),this.globalPicker.removeClass("n2-under-pick"),this.picker.removeClass("n2-under-pick"),this.overlays&&this.overlays.remove(),this.overlays=null,this.status=n.INITIALIZED,NextendEsc.pop()},i.prototype.change=function(e){this.picker.trigger("mouseleave"),this.element.val(e).trigger("change"),this._setValue(e),this.triggerOutsideChange()},i.prototype.insideChange=function(e){this.element.val(e),this._setValue(e),this.triggerInsideChange()},i.prototype._setValue=function(e){e&&""!=e?(this.picker.addClass("n2-active"),this.aligns.css("display","")):(this.picker.removeClass("n2-active"),this.aligns.css("display","none"))},t.NextendElementLayerPicker=i}(n2,window),function(e,t){function i(t){this.element=e("#"+t),this.setAttribute(),this.element.on("nextendChange",e.proxy(this.setAttribute,this))}i.prototype.setAttribute=function(){e("#n2-admin").attr("data-slider-type",this.element.val())},t.NextendElementSliderType=i}(n2,window),function(e,t){function i(t){this.element=e("#"+t),this.area=e("#"+t+"_area"),this.areas=this.area.find(".n2-area"),this.areas.on("click",e.proxy(this.chooseArea,this)),NextendElement.prototype.constructor.apply(this,arguments)}i.prototype=Object.create(NextendElement.prototype),i.prototype.constructor=i,i.prototype.chooseArea=function(t){var i=parseInt(e(t.target).data("area"));this.element.val(i),this.setSelected(i),this.triggerOutsideChange()},i.prototype.insideChange=function(e){e=parseInt(e),this.element.val(e),this.setSelected(e),this.triggerInsideChange()},i.prototype.setSelected=function(e){this.areas.removeClass("n2-active"),this.areas.eq(e-1).addClass("n2-active")},t.NextendElementSliderWidgetArea=i}(n2,window),function(e,t){function i(t){this.element=e("#"+t+"-mode"),this.container=this.element.closest(".n2-form-element-mixed"),this.tabs=this.container.find("> .n2-mixed-group"),this.element.on("nextendChange",e.proxy(this.onChange,this)),this.onChange()}i.prototype.onChange=function(){var e=this.element.val();"advanced"==e?(this.tabs.eq(2).css("display",""),this.tabs.eq(1).css("display","none")):(this.tabs.eq(1).css("display",""),this.tabs.eq(2).css("display","none"))},t.NextendElementWidgetPosition=i}(n2,window),function(e,t,i,n){"use strict";function a(){this._refreshTimeout=null,this.modal=!1,this.group=0,e.generator=this;var i=e.$currentSlideElement.data("variables");if(i){this.variables=i;for(var n in this.variables)!isNaN(parseFloat(n))&&isFinite(n)&&(this.group=Math.max(this.group,parseInt(n)+1));this.fill=this.generatorFill,this.group>0&&(this.registerField=this.generatorRegisterField,this.button=t('<a href="#" class="n2-form-element-button n2-form-element-button-inverted n2-h5 n2-uc" style="position:absolute; left: -26px; top:50%;margin-top: -14px;font-size: 14px; padding:0; width: 28px;text-align: center;">$</a>').on("click",t.proxy(function(e){e.preventDefault(),this.showModal()},this)),this.registerField(t("#slidetitle")),this.registerField(t("#slidedescription")),this.registerField(t("#slidethumbnail")),this.registerField(t("#slidebackgroundImage")),this.registerField(t("#slidebackgroundAlt")),this.registerField(t("#slidebackgroundTitle")),this.registerField(t("#slidebackgroundVideoMp4")),this.registerField(t("#slidebackgroundVideoWebm")),this.registerField(t("#slidebackgroundVideoOgg")),this.registerField(t("#linkslidelink_0"))),this.initSlideDataRefresh()}else this.variables=null}a.prototype.fill=function(e){return e},a.prototype.generatorFill=function(e){return e.replace(/{((([a-z]+)\(([0-9a-zA-Z_,\/\(\)]+)\))|([a-zA-Z0-9][a-zA-Z0-9_\/]*))}/g,t.proxy(this.parseFunction,this))},a.prototype.parseFunction=function(e,t,i,n,a,s){if("undefined"==typeof s){for(var r=a.split(/,(?!.*\))/),o=0;o<r.length;o++)r[o]=this.parseVariable(r[o]);return this[n].apply(this,r)}return this.parseVariable(s)},a.prototype.parseVariable=function(e){var t=e.match(/((([a-z]+)\(([0-9a-zA-Z_,\/\(\)]+)\)))/);if(t)return this.parseFunction.apply(this,t);var i=e.match(/([a-zA-Z][0-9a-zA-Z_]*)(\/([0-9a-z]+))?/);if(i){var n=i[3];if("undefined"==typeof n)n=0;else{var a=parseInt(n);isNaN(a)||(n=Math.max(n,1)-1)}return"undefined"!=typeof this.variables[n]&&"undefined"!=typeof this.variables[n][i[1]]?this.variables[n][i[1]]:""}return e},a.prototype.cleanhtml=function(e){return strip_tags(e,"<p><a><b><br /><br/><i>")},a.prototype.removehtml=function(e){return t("<div>"+e+"</div>").text()},a.prototype.splitbychars=function(e,t,i){return e.substr(t,i)},a.prototype.splitbywords=function(e,t,i){var n=e,a=n.length,s=Math.max(0,0==t?0:n.indexOf(" ",t)),r=Math.max(0,i>a?a:n.indexOf(" ",i));return n.substr(s,r)},a.prototype.findimage=function(e,t){var i=e,n=/(<img.*?src=[\'"](.*?)[\'"][^>]*>)|(background(-image)??\s*?:.*?url\((["|\']?)?(.+?)(["|\']?)?\))/gi,a=[],s=null;for(t="undefined"!=typeof t?parseInt(t)-1:0;s=n.exec(i);)"undefined"!=typeof s[2]?a.push(s[2]):"undefined"!=typeof s[6]&&a.push(s[6]);return a.length?a.length>t?a[t]:a[a.length-1]:""},a.prototype.findlink=function(e,t){var i=e,n=/href=["\']?([^"\'>]+)["\']?/gi,a=[],s=null;for(t="undefined"!=typeof t?parseInt(t)-1:0;s=n.exec(i);)"undefined"!=typeof s[1]&&a.push(s[1]);return a.length?a.length>t?a[t]:a[a.length-1]:""},a.prototype.removevarlink=function(e){var t=e,i=/<a href=\"(.*?)\">(.*?)<\/a>/g;return t.replace(i,"")},a.prototype.registerField=function(e){},a.prototype.generatorRegisterField=function(e){var i=e.parent();i.on({mouseenter:t.proxy(function(){this.activeField=e,this.button.prependTo(i)},this)})},a.prototype.getModal=function(){var e=this;if(!this.modal){var i={key:"",group:1,filter:"no",split:"no",splitStart:0,splitLength:300,findImage:0,findImageIndex:1,findLink:0,findLinkIndex:1,removeVarLink:0},n=function(){var e=i.key+"/"+i.group;return i.findImage&&(e="findimage("+e+","+Math.max(1,i.findImageIndex)+")"),i.findLink&&(e="findlink("+e+","+Math.max(1,i.findLinkIndex)+")"),i.removeVarLink&&(e="removevarlink("+e+")"),"no"!=i.filter&&(e=i.filter+"("+e+")"),"no"!=i.split&&i.splitStart>=0&&i.splitLength>0&&(e=i.split+"("+e+","+i.splitStart+","+i.splitLength+")"),"{"+e+"}"},a=t('<div class="n2-generator-result-container" />'),s=function(){a.html(t("<div/>").text(e.fill(n())).html())},r=e.group,o=null,l=null,d=t('<div class="n2-generator-insert-variable"/>'),p=NextendModal.prototype.createHeading(n2_("Choose the group")).appendTo(d),h=t('<div class="n2-group-container" />').appendTo(d);d.append(NextendModal.prototype.createHeading(n2_("Choose the variable")));var c=t('<div class="n2-variable-container" />').appendTo(d),u=t('<div class="n2-generator-functions-container n2-form-element-mixed" />').appendTo(t('<div class="n2-form" />').appendTo(d));d.append(NextendModal.prototype.createHeading(n2_("Result"))),a.appendTo(d),t('<div class="n2-mixed-group"><div class="n2-mixed-label"><label>'+n2_("Filter")+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-list"><select autocomplete="off" name="filter" id="n2-generator-function-filter"><option selected="selected" value="no">'+n2_("No")+'</option><option value="cleanhtml">'+n2_("Clean HTML")+'</option><option value="removehtml">'+n2_("Remove HTML")+"</option></select></div></div></div>").appendTo(u);var y=u.find("#n2-generator-function-filter");y.on("change",t.proxy(function(){i.filter=y.val(),s()},this)),t('<div class="n2-mixed-group"><div class="n2-mixed-label"><label>'+n2_("Split by chars")+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-list"><select autocomplete="off" name="split" id="n2-generator-function-split"><option selected="selected" value="no">'+n2_("No")+'</option><option value="splitbychars">'+n2_("Strict")+'</option><option value="splitbywords">'+n2_("Respect words")+'</option></select></div><div class="n2-form-element-text n2-text-has-unit n2-border-radius"><div class="n2-text-sub-label n2-h5 n2-uc">'+n2_("Start")+'</div><input type="text" autocomplete="off" style="width: 22px;" class="n2-h5" value="0" id="n2-generator-function-split-start"></div><div class="n2-form-element-text n2-text-has-unit n2-border-radius"><div class="n2-text-sub-label n2-h5 n2-uc">'+n2_("Length")+'</div><input type="text" autocomplete="off" style="width: 22px;" class="n2-h5" value="300" id="n2-generator-function-split-length"></div></div></div>').appendTo(u);var f=u.find("#n2-generator-function-split");f.on("change",t.proxy(function(){i.split=f.val(),s()},this));var m=u.find("#n2-generator-function-split-start");m.on("change",t.proxy(function(){i.splitStart=parseInt(m.val()),s()},this));var g=u.find("#n2-generator-function-split-length");g.on("change",t.proxy(function(){i.splitLength=parseInt(g.val()),s()},this)),t('<div class="n2-mixed-group"><div class="n2-mixed-label"><label>'+n2_("Find image")+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-onoff"><div class="n2-onoff-slider"><div class="n2-onoff-no"><i class="n2-i n2-i-close"></i></div><div class="n2-onoff-round"></div><div class="n2-onoff-yes"><i class="n2-i n2-i-tick"></i></div></div><input type="hidden" autocomplete="off" value="0" id="n2-generator-function-findimage"></div><div class="n2-form-element-text n2-text-has-unit n2-border-radius"><div class="n2-text-sub-label n2-h5 n2-uc">'+n2_("Index")+'</div><input type="text" autocomplete="off" style="width: 22px;" class="n2-h5" value="1" id="n2-generator-function-findimage-index"></div></div></div>').appendTo(u);var v=u.find("#n2-generator-function-findimage");v.on("nextendChange",t.proxy(function(){i.findImage=parseInt(v.val()),s()},this));var x=u.find("#n2-generator-function-findimage-index");x.on("change",t.proxy(function(){i.findImageIndex=parseInt(x.val()),s()},this)),t('<div class="n2-mixed-group"><div class="n2-mixed-label"><label>'+n2_("Find link")+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-onoff"><div class="n2-onoff-slider"><div class="n2-onoff-no"><i class="n2-i n2-i-close"></i></div><div class="n2-onoff-round"></div><div class="n2-onoff-yes"><i class="n2-i n2-i-tick"></i></div></div><input type="hidden" autocomplete="off" value="0" id="n2-generator-function-findlink"></div><div class="n2-form-element-text n2-text-has-unit n2-border-radius"><div class="n2-text-sub-label n2-h5 n2-uc">'+n2_("Index")+'</div><input type="text" autocomplete="off" style="width: 22px;" class="n2-h5" value="1" id="n2-generator-function-findlink-index"></div></div></div>').appendTo(u);var b=u.find("#n2-generator-function-findlink");b.on("nextendChange",t.proxy(function(){i.findLink=parseInt(b.val()),s()},this));var k=u.find("#n2-generator-function-findlink-index");k.on("change",t.proxy(function(){i.findLinkIndex=parseInt(k.val()),s()},this)),t('<div class="n2-mixed-group"><div class="n2-mixed-label"><label>'+n2_("Remove links")+'</label></div><div class="n2-mixed-element"><div class="n2-form-element-onoff"><div class="n2-onoff-slider"><div class="n2-onoff-no"><i class="n2-i n2-i-close"></i></div><div class="n2-onoff-round"></div><div class="n2-onoff-yes"><i class="n2-i n2-i-tick"></i></div></div><input type="hidden" autocomplete="off" value="0" id="n2-generator-function-removevarlink"></div></div></div>').appendTo(u);var w=u.find("#n2-generator-function-removevarlink");w.on("nextendChange",t.proxy(function(){i.removeVarLink=parseInt(w.val()),s()},this));var S=u.find("#n2-generator-function-removevarlink-index");S.on("change",t.proxy(function(){i.removeVarLinkIndex=parseInt(S.val()),s()},this));for(var C in this.variables[0])t('<a href="#" class="n2-button n2-button-small n2-button-grey">'+C+"</a>").on("click",t.proxy(function(e,n){n.preventDefault(),o.removeClass("n2-active"),t(n.currentTarget).addClass("n2-active"),i.key=e,s()},this,C)).appendTo(c);o=c.find("a"),o.eq(0).trigger("click"),1==r&&(p.css("display","none"),h.css("display","none"));for(var _=0;r>_;_++)t('<a href="#" class="n2-button n2-button-small n2-button-grey">'+(_+1)+"</a>").on("click",t.proxy(function(e,n){n.preventDefault(),l.removeClass("n2-active"),t(n.currentTarget).addClass("n2-active"),i.group=e+1,s()},this,_)).appendTo(h);l=h.find("a"),l.eq(0).trigger("click");var I=!1;this.modal=new NextendModal({zero:{size:[1e3,r>1?560:490],title:n2_("Insert variable"),back:!1,close:!0,content:d,controls:['<a href="#" class="n2-button n2-button-big n2-button-green">'+n2_("Insert")+"</a>"],fn:{show:function(){I||(new NextendElementOnoff("n2-generator-function-findimage"),new NextendElementOnoff("n2-generator-function-findlink"),new NextendElementOnoff("n2-generator-function-removevarlink"),I=!0),this.controls.find(".n2-button").on("click",t.proxy(function(t){t.preventDefault(),e.insert(n()),this.hide(t)},this))}}}},!1),this.modal.setCustomClass("n2-ss-generator-modal")}return this.modal},a.prototype.showModal=function(){this.getModal().show()},a.prototype.insert=function(e){this.activeField.val(e).trigger("change")},a.prototype.initSlideDataRefresh=function(){var e=t("#slidetitle").on("nextendChange",t.proxy(function(){this.variables.slide.name=e.val(),this.refresh()},this)),i=t("#slidedescription").on("nextendChange",t.proxy(function(){this.variables.slide.description=i.val(),this.refresh()},this))},a.prototype.refresh=function(){this._refreshTimeout&&(clearTimeout(this._refreshTimeout),this._refreshTimeout=null),this._refreshTimeout=setTimeout(t.proxy(this._refresh,this),100)},a.prototype._refresh=function(){for(var t=e.layerManager.layerList,i=0;i<t.length;i++)for(var n=t[i].items,a=0;a<n.length;a++)n[a].reRender()},i.SmartSliderAdminGenerator=a}(nextend.smartSlider,n2,window),function(e,t,i){function n(t){this.ajaxUrl=t,e("#generatorrecord-viewer").on("click",e.proxy(this.showRecords,this))}n.prototype.showRecords=function(t){t.preventDefault(),NextendAjaxHelper.ajax({type:"POST",url:this.ajaxUrl,data:e("#smartslider-form").serialize(),dataType:"json"}).done(function(e){var t=new NextendModal({zero:{size:[1300,700],title:"Records",content:e.data.html}},!0);t.content.css("overflow","auto")}).error(function(e){if(200==e.status){var t=new NextendModal({zero:{size:[1300,700],title:"Response",content:e.responseText}},!0);t.content.css("overflow","auto")}})},t.NextendSmartSliderGeneratorRecords=n}(n2,window),function(e,t,i,n){function a(e,a,s,r){this.item=e,this.layer=a,this.itemEditor=s,this.type=this.item.data("item"),this.values=this.item.data("itemvalues"),"object"!=typeof this.values&&(this.values=t.parseJSON(this.values)),
i["NextendSmartSliderItemParser_"+this.type]!==n?this.parser=new i["NextendSmartSliderItemParser_"+this.type](this):this.parser=new i.NextendSmartSliderItemParser(this),this.item.data("item",this),"undefined"!=typeof r&&(0==this.layer.items.length||this.layer.items.length<=r?this.item.appendTo(this.layer.layer):this.layer.items[r].item.before(this.item)),"undefined"==typeof r||0==this.layer.items.length||this.layer.items.length<=r?this.layer.items.push(this):this.layer.items.splice(r,0,this),0===this.item.children().length&&this.reRender(),t("<div/>").addClass("ui-helper ui-item-overlay").css("zIndex",89).appendTo(this.item),t(window).trigger("ItemCreated")}a.prototype.changeValue=function(e,i){this==this.itemEditor.activeItem?t("#item_"+this.type+e).data("field").insideChange(i):this.values[e]=i},a.prototype.activate=function(e,t){this.itemEditor.setActiveItem(this,t)},a.prototype.deActivate=function(){},a.prototype.render=function(e,i,n){this.layer.layer.triggerHandler("itemRender"),this.item.html(this.parser.render(e,i)),this.values=n,t("<div/>").addClass("ui-helper ui-item-overlay").css("zIndex",89).appendTo(this.item);var a=this.parser.getName(i);a=a===!1?this.type:a.replace(/[<> ]/gi,""),this.layer.rename(a,!1),this.layer.update()},a.prototype.reRender=function(e){var i={},n=this.itemEditor,a=n.getItemType(this.type),s=a.template;for(var r in this.values)i[r]=this.values[r];i=t.extend({},this.parser.getDefault(),i,e);var o=t.extend({},i);this.parser.parseAll(i,this),this.values=o;for(var l in i){var d=new RegExp("\\{"+l+"\\}","g");s=s.replace(d,i[l])}this.render(t(s),i,this.values)},a.prototype.duplicate=function(){this.layer.addItem(this.getHTML(),!0)},a.prototype["delete"]=function(){this.item.trigger("mouseleave"),this.item.remove(),this.itemEditor.activeItem==this&&(this.itemEditor.activeItem=null)},a.prototype.getHTML=function(e){var i="";return i=e?"["+this.type+' values="'+Base64.encode(JSON.stringify(this.values))+'"]':t('<div class="n2-ss-item n2-ss-item-'+this.type+'"></div>').attr("data-item",this.type).attr("data-itemvalues",JSON.stringify(this.values))},a.prototype.getData=function(){return{type:this.type,values:this.values}},a.prototype.history=function(e,i,n){switch(e){case"updateCurrentItem":this.reRender(t.extend(!0,{},i)),this.values=i,this.itemEditor.setActiveItem(this,!0)}},i.NextendSmartSliderItem=a}(nextend.smartSlider,n2,window),function(e,t,i,n){function a(e){this.suppressChange=!1,this.activeItemOriginalData=null,this.layerEditor=e,this._initInstalledItems(),this.form={},this.activeForm={form:t("<div></div>")}}a.prototype.setActiveItem=function(e,i){if(e!=this.activeItem||i){this.activeItemOriginalData=null;var n=e.type,a=e.values;this.activeForm.form.css("display","none"),this.activeForm=this.getItemType(n),this.activeItem&&this.activeItem.deActivate(),this.activeItem=e,this.suppressChange=!0;for(var s in a){var r=t("#item_"+n+s).data("field");r&&r.insideChange(a[s])}this.suppressChange=!1,this.activeForm.form.css("display","block")}},a.prototype._initInstalledItems=function(){t("#n2-ss-item-container .n2-ss-core-item").on("click",t.proxy(function(e){this.createLayerItem(t(e.currentTarget).data("item"))},this))},a.prototype.createLayerItem=function(n){var a=this.getItemType(n),s=this.layerEditor.createLayer(t(".n2-ss-core-item-"+n).data("layerproperties")),r=t("<div></div>").data("item",n).data("itemvalues",t.extend(!0,{},a.values)).addClass("n2-ss-item n2-ss-item-"+n),o=new i.NextendSmartSliderItem(r,s,this,0);return s.activate(),e.sidebarManager.switchTab(0),e.history.add(t.proxy(function(){return[this,"createLayer","create","delete",[o,n]]},this)),o},a.prototype.getItemType=function(e){if(this.form[e]===n){var i=t("#smartslider-slide-toolbox-item-type-"+e),a={form:i,template:i.data("itemtemplate"),values:i.data("itemvalues"),fields:i.find('[name^="item_'+e+'"]'),fieldNameRegexp:new RegExp("item_"+e+"\\[(.*?)\\]","")};a.fields.on({nextendChange:t.proxy(this.updateCurrentItem,this),keydown:t.proxy(this.updateCurrentItemDeBounced,this)}),this.form[e]=a}return this.form[e]},a.prototype.updateCurrentItem=function(i){if(!this.suppressChange){null===this.activeItemOriginalData&&(this.activeItemOriginalData=t.extend({},this.activeItem.values));var n={},a={},s=this.form[this.activeItem.type],r=s.template,o=this.activeItem.parser;s.fields.each(t.proxy(function(e,i){var i=t(i),r=i.attr("name").match(s.fieldNameRegexp)[1];a[r]=n[r]=i.val()},this)),n=t.extend({},o.getDefault(),n),o.parseAll(n,this.activeItem);for(var l in n){var d=new RegExp("\\{"+l+"\\}","g");r=r.replace(d,n[l])}i&&"nextendChange"==i.type&&(e.history.add(t.proxy(function(){return[this.activeItem,"updateCurrentItem",t.extend({},a),this.activeItemOriginalData,[]]},this)),this.activeItemOriginalData=null),this.activeItem.render(t(r),n,a)}},a.prototype.updateCurrentItemDeBounced=NextendDeBounce(function(e){this.updateCurrentItem(e)},100),a.prototype.history=function(t,i,n){switch(t){case"createLayer":switch(i){case"delete":n[0].layer["delete"]();break;case"create":var a=this.createLayerItem(n[1]);e.history.changeFuture(n[0].layer,a.layer),e.history.changeFuture(n[0],a)}}},i.NextendSmartSliderItemManager=a}(nextend.smartSlider,n2,window),function(e,t,i){function n(e){this.pre="div#"+nextend.smartSlider.frontend.sliderElement.attr("id")+" ",this.item=e,this.fonts=[],this.styles=[],this.needFill=[],this.added()}n.prototype.getDefault=function(){return{}},n.prototype.added=function(){},n.prototype.addedFont=function(t,i){this.fonts.push({mode:t,name:i}),e.when(nextend.fontManager.addVisualUsage(t,this.item.values[i],this.pre)).done(e.proxy(function(e){e||this.item.changeValue(i,"")},this))},n.prototype.addedStyle=function(t,i){this.styles.push({mode:t,name:i}),e.when(nextend.styleManager.addVisualUsage(t,this.item.values[i],this.pre)).done(e.proxy(function(e){e||this.item.changeValue(i,"")},this))},n.prototype.parseAll=function(e,t){for(var i=0;i<this.fonts.length;i++)e[this.fonts[i].name+"class"]=nextend.fontManager.getClass(e[this.fonts[i].name],this.fonts[i].mode)+" ";for(var i=0;i<this.styles.length;i++)e[this.styles[i].name+"class"]=nextend.styleManager.getClass(e[this.styles[i].name],this.styles[i].mode)+" ";for(var i=0;i<this.needFill.length;i++)e[this.needFill[i]]=nextend.smartSlider.generator.fill(e[this.needFill[i]])},n.prototype.render=function(e,t){return e},n.prototype.getName=function(e){return!1},n.prototype.resizeLayerToImage=function(t,i){e("<img/>").attr("src",i).load(function(){var e=t.layer.layerEditor.slideSize,i=e.width,n=e.height;if(this.width>0&&this.height>0){if(i=parseInt(Math.min(this.width,i)),n=parseInt(Math.min(this.height,n)),nextend.smartSlider.history.off(),e.width/e.height<=i/n)t.layer.setProperty("width",i),t.layer.setProperty("height",this.height*i/this.width);else{var a=Math.min(this.width*e.height/this.height,i);t.layer.setProperty("width",a),t.layer.setProperty("height",this.height*a/this.width)}nextend.smartSlider.history.on()}})},n.prototype.fitLayer=function(e){return!1},t.NextendSmartSliderItemParser=n}(n2,window),function(e,t,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["content","url"],this.addedFont("link","font"),this.addedStyle("button","style"),nextend.smartSlider.generator.registerField(e("#item_buttoncontent")),nextend.smartSlider.generator.registerField(e("#linkitem_buttonlink_0"))},n.prototype.getName=function(e){return e.content},n.prototype.parseAll=function(e){var t=e.link.split("|*|");e.url=t[0],e.target=t[1],delete e.link,0|e.fullwidth?e.display="block;":e.display="inline-block;",e.extrastyle=0|e.nowrap?"white-space: nowrap;":"",NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments)},t.NextendSmartSliderItemParser_button=n}(n2,window),function(e,t,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return{link:"#|*|_self",font:"",style:""}},n.prototype.added=function(){this.needFill=["heading","url"],this.addedFont("hover","font"),this.addedStyle("heading","style"),nextend.smartSlider.generator.registerField(e("#item_headingheading")),nextend.smartSlider.generator.registerField(e("#linkitem_headinglink_0"))},n.prototype.getName=function(e){return e.heading},n.prototype.parseAll=function(t){t.uid=e.fn.uid();var i=t.link.split("|*|");t.url=i[0],t.target=i[1],delete t.link,0|t.fullwidth?t.display="block;":t.display="inline-block;",t.extrastyle=0|t.nowrap?"white-space: nowrap;":"",t.heading=e("<div>"+t.heading+"</div>").text().replace(/\n/g,"<br />"),t.priority=2,t["class"]="",NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),"#"==t.url?t.afontclass="":(t.afontclass=t.fontclass,t.fontclass="")},n.prototype.render=function(e,t){if("#"==t.url){var i=e.find("a");i.parent().html(i.html())}return e},t.NextendSmartSliderItemParser_heading=n}(n2,window),function(e,t,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return{size:"100%|*|auto",link:"#|*|_self",style:""}},n.prototype.added=function(){this.needFill=["image","url"],this.addedStyle("box","style"),nextend.smartSlider.generator.registerField(e("#item_imageimage")),nextend.smartSlider.generator.registerField(e("#item_imagealt")),nextend.smartSlider.generator.registerField(e("#item_imagetitle")),nextend.smartSlider.generator.registerField(e("#linkitem_imagelink_0"))},n.prototype.getName=function(e){return e.image.split("/").pop()},n.prototype.parseAll=function(e,t){var i=e.size.split("|*|");e.width=i[0],e.height=i[1],delete e.size;var n=e.link.split("|*|");e.url=n[0],e.target=n[1],delete e.link,NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),t&&"$system$/images/placeholder/image.png"==t.values.image&&e.image!=t.values.image?(e.image=nextend.imageHelper.fixed(e.image),this.resizeLayerToImage(t,e.image)):e.image=nextend.imageHelper.fixed(e.image)},n.prototype.fitLayer=function(e){return this.resizeLayerToImage(e,nextend.imageHelper.fixed(e.values.image)),!0},n.prototype.render=function(e,t){return"#"==t.url&&e.html(e.children("a").html()),e},t.NextendSmartSliderItemParser_image=n}(n2,window),function(e,t,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}function a(e){var t=!1,i=!1,n="table|thead|tfoot|caption|col|colgroup|tbody|tr|td|th|div|dl|dd|dt|ul|ol|li|pre|form|map|area|blockquote|address|math|style|p|h[1-6]|hr|fieldset|noscript|legend|section|article|aside|hgroup|header|footer|nav|figure|details|menu|summary";return-1!==e.indexOf("<object")&&(e=e.replace(/<object[\s\S]+?<\/object>/g,function(e){return e.replace(/[\r\n]+/g,"")})),e=e.replace(/<[^<>]+>/g,function(e){return e.replace(/[\r\n]+/g," ")}),-1===e.indexOf("<pre")&&-1===e.indexOf("<script")||(t=!0,e=e.replace(/<(pre|script)[^>]*>[\s\S]+?<\/\1>/g,function(e){return e.replace(/(\r\n|\n)/g,"<wp-line-break>")})),-1!==e.indexOf("[caption")&&(i=!0,e=e.replace(/\[caption[\s\S]+?\[\/caption\]/g,function(e){return e=e.replace(/<br([^>]*)>/g,"<wp-temp-br$1>"),e=e.replace(/<[a-zA-Z0-9]+( [^<>]+)?>/g,function(e){return e.replace(/[\r\n\t]+/," ")}),e.replace(/\s*\n\s*/g,"<wp-temp-br />")})),e+="\n\n",e=e.replace(/<br \/>\s*<br \/>/gi,"\n\n"),e=e.replace(new RegExp("(<(?:"+n+")(?: [^>]*)?>)","gi"),"\n$1"),e=e.replace(new RegExp("(</(?:"+n+")>)","gi"),"$1\n\n"),e=e.replace(/<hr( [^>]*)?>/gi,"<hr$1>\n\n"),e=e.replace(/\r\n|\r/g,"\n"),e=e.replace(/\n\s*\n+/g,"\n\n"),e=e.replace(/([\s\S]+?)\n\n/g,"<p>$1</p>\n"),e=e.replace(/<p>\s*?<\/p>/gi,""),e=e.replace(new RegExp("<p>\\s*(</?(?:"+n+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),e=e.replace(/<p>(<li.+?)<\/p>/gi,"$1"),e=e.replace(/<p>\s*<blockquote([^>]*)>/gi,"<blockquote$1><p>"),e=e.replace(/<\/blockquote>\s*<\/p>/gi,"</p></blockquote>"),e=e.replace(new RegExp("<p>\\s*(</?(?:"+n+")(?: [^>]*)?>)","gi"),"$1"),e=e.replace(new RegExp("(</?(?:"+n+")(?: [^>]*)?>)\\s*</p>","gi"),"$1"),e=e.replace(/\s*\n/gi,"<br />\n"),e=e.replace(new RegExp("(</?(?:"+n+")[^>]*>)\\s*<br />","gi"),"$1"),e=e.replace(/<br \/>(\s*<\/?(?:p|li|div|dl|dd|dt|th|pre|td|ul|ol)>)/gi,"$1"),e=e.replace(/(?:<p>|<br ?\/?>)*\s*\[caption([^\[]+)\[\/caption\]\s*(?:<\/p>|<br ?\/?>)*/gi,"[caption$1[/caption]"),e=e.replace(/(<(?:div|th|td|form|fieldset|dd)[^>]*>)(.*?)<\/p>/g,function(e,t,i){return i.match(/<p( [^>]*)?>/)?e:t+"<p>"+i+"</p>"}),t&&(e=e.replace(/<wp-line-break>/g,"\n")),i&&(e=e.replace(/<wp-temp-br([^>]*)>/g,"<br$1>")),e}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.getDefault=function(){return{contentmobile:"",contenttablet:"",font:"",style:""}},n.prototype.added=function(){this.needFill=["content","contenttablet","contentmobile"],this.addedFont("paragraph","font"),this.addedStyle("heading","style"),nextend.smartSlider.generator.registerField(e("#item_textcontent")),nextend.smartSlider.generator.registerField(e("#item_textcontenttablet")),nextend.smartSlider.generator.registerField(e("#item_textcontentmobile"))},n.prototype.getName=function(e){return e.content},n.prototype.parseAll=function(e){NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),e.p=a(e.content),e.ptablet=a(e.contenttablet),e.pmobile=a(e.contentmobile)},n.prototype.render=function(e,t){return""==t.contenttablet&&(e=e.filter(":not(.n2-ss-tablet)"),e.filter(".n2-ss-desktop").addClass("n2-ss-tablet")),""==t.contentmobile&&(e=e.filter(":not(.n2-ss-mobile)"),e.filter(".n2-ss-tablet, .n2-ss-desktop").last().addClass("n2-ss-mobile")),e.find("p").addClass(t.fontclass+" "+t.styleclass),e.find("a").on("click",function(e){e.preventDefault()}),e},t.NextendSmartSliderItemParser_text=n}(n2,window),function(e,t,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["vimeourl"],nextend.smartSlider.generator.registerField(e("#item_vimeovimeourl"))},n.prototype.getName=function(e){return e.vimeourl},n.prototype.parseAll=function(t,i){var n=i.values.vimeourl!=t.vimeourl;if(NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),""==t.image&&(t.image="$system$/images/placeholder/video.png"),t.image=nextend.imageHelper.fixed(t.image),n&&""!=t.vimeourl){var a=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/,s=t.vimeourl.match(a),r=!1;s?r=s[3]:t.vimeourl.match(/^[0-9]+$/)&&(r=t.vimeourl),r?NextendAjaxHelper.getJSON("https://vimeo.com/api/v2/video/"+encodeURI(r)+".json").done(e.proxy(function(t){e("#item_vimeoimage").val(t[0].thumbnail_large).trigger("change")},this)).fail(function(e){nextend.notificationCenter.error(e.responseText)}):nextend.notificationCenter.error("The provided URL does not match any known Vimeo url or code!")}},n.prototype.fitLayer=function(e){return!0},t.NextendSmartSliderItemParser_vimeo=n}(n2,window),function(e,t,i){function n(){NextendSmartSliderItemParser.apply(this,arguments)}n.prototype=Object.create(NextendSmartSliderItemParser.prototype),n.prototype.constructor=n,n.prototype.added=function(){this.needFill=["youtubeurl"],nextend.smartSlider.generator.registerField(e("#item_youtubeyoutubeurl")),nextend.smartSlider.generator.registerField(e("#item_youtubestart"))},n.prototype.getName=function(e){return e.youtubeurl},n.prototype.parseAll=function(t,i){var n=i.values.youtubeurl!=t.youtubeurl;if(NextendSmartSliderItemParser.prototype.parseAll.apply(this,arguments),""==t.image&&(t.image="$system$/images/placeholder/video.png"),t.image=nextend.imageHelper.fixed(t.image),n){var a=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/,s=t.youtubeurl.match(a);s?NextendAjaxHelper.getJSON("https://www.googleapis.com/youtube/v3/videos?id="+encodeURI(s[2])+"&part=snippet&key=AIzaSyC3AolfvPAPlJs-2FgyPJdEEKS6nbPHdSM").done(e.proxy(function(t){if(t.items.length){var i=t.items[0].snippet.thumbnails,n=i.maxres||i.standard||i.high||i.medium||i["default"];e("#item_youtubeimage").val(n.url).trigger("change")}},this)).fail(function(e){nextend.notificationCenter.error(e.error.errors[0].message)}):nextend.notificationCenter.error("The provided URL does not match any known YouTube url or code!")}},n.prototype.fitLayer=function(e){return!0},t.NextendSmartSliderItemParser_youtube=n}(n2,window),function(e,t,i,n){"use strict";function a(e,i,n){this.$=t(this),this.animations=e,this.group=i,this.data=n,this.row=t('<li class="n2-ss-animation-row"></li>').data("animation",this);var a=t('<div class="n2-ss-animation-title"></div>').appendTo(this.row);this.label=t("<span>"+this.data.name+"</span>").appendTo(a);t('<div class="n2-actions"></div>').append(t('<a onclick="return false;" href="#"><i class="n2-i n2-i-delete n2-i-grey-opacity"></i></a>').on("click",t.proxy(this["delete"],this))).appendTo(a)}a.prototype.getRow=function(){return this.row},a.prototype.edit=function(){this.animations.edit(this.group,this.animations[this.group+"Rows"].index(this.row))},a.prototype.save=function(e){e!==!1&&(this.data=e,this.label.html(e.name),this.$.trigger("animationChanged"))},a.prototype["delete"]=function(t){t&&t.stopPropagation(),this.row.remove(),this.animations.removeAnimation(this),e.layerAnimationManager.update(this.group),this.$.trigger("animationDeleted")},a.prototype.setDelay=function(e){this.data.delay=e},a.prototype.setDuration=function(e){this.data.duration=e},i.NextendSmartSliderLayerAnimation=a}(nextend.smartSlider,n2,window),function(e,t,i,n){function a(t){this.layerEditor=t,this.createGroup("in",n2_("in"),"#layer-animation-chain-in"),this.lists=this["in"].list,this.createGroup("loop",n2_("loop"),"#layer-animation-chain-loop"),this.createGroup("out",n2_("out"),"#layer-animation-chain-out"),this.lists=this.lists.add(this.loop.list).add(this.out.list),e.layerAnimationManager=this}a.prototype.createGroup=function(e,i,n){n=t(n);var a=t('<div class="n2-sidebar-row n2-sidebar-header-bg n2-form-dark n2-sets-header"><div class="n2-table"><div class="n2-tr"><div class="n2-td"><div class="n2-h3 n2-uc">'+i+'</div></div><div style="text-align: '+(nextend.isRTL()?"left":"right")+';" class="n2-td"></div></div></div></div>').appendTo(n),s=a.find(".n2-td").eq(1);this[e]={container:n,header:a,list:t('<ul class="n2-list n2-h4 n2-list-orderable n2-ss-animation-list"></ul>').on("click",t.proxy(this.editGroup,this,e)).data("group",e).appendTo(n),add:this.getAddButton(e,n2_("Add")).appendTo(s),clear:this.getClearButton(e).appendTo(s)}},a.prototype.getAddButton=function(e,i){var n=t('<a href="#" class="n2-button n2-button-medium n2-button-green n2-h5 n2-uc">'+i+"</a>").on("click",t.proxy(this.createAnimation,this,e));return n},a.prototype.getClearButton=function(e){var i=t('<a href="#" class="n2-button n2-button-medium n2-button-grey n2-h5 n2-uc">'+n2_("Clear")+"</a>").on("click",t.proxy(this.clear,this,e));return i},a.prototype.getActiveLayer=function(){return this.layerEditor.layerList[this.layerEditor.activeLayerIndex]},a.prototype.editGroup=function(e,i){var n=0;if(i&&(i.preventDefault(),n=t(i.target).closest(".n2-ss-animation-row").index()),-1!=n){var a=this.getActiveLayer().animation;a.edit(e,n)}},a.prototype.clear=function(e,t){t&&t.preventDefault(),this.getActiveLayer().animation.clear(e)},a.prototype.createAnimation=function(e,i){i&&i.preventDefault();var n=this.getActiveLayer(),a=n.layer,s=nextend.animationManager;s.controller.setPreviewSize(a.width(),a.height()).setGroup(e);var r={repeatable:1};"in"==e?(r.specialZero=1,r.playEvent=1,s.changeSetById(1e3),s.setTitle(n2_("In animation"))):"loop"==e?(r.repeat=1,r.playEvent=1,r.pauseEvent=1,r.stopEvent=1,s.changeSetById(1200),s.setTitle(n2_("Loop animation"))):"out"==e&&(r.playEvent=1,r.instantOut=1,s.changeSetById(1e3),s.setTitle(n2_("Out animation"))),s.show(r,{animations:[],transformOrigin:"50|*|50|*|0",specialZero:n.animation.data.specialZero,repeatCount:n.animation.data.repeatCount,repeatDelay:n.animation.data.repeatDelay,playEvent:"",pauseEvent:"",stopEvent:"",repeatable:n.animation.data.repeatable,instantOut:n.animation.data.instantOut},t.proxy(this.storeNewAnimation,this,e),{previewMode:!1,previewHTML:!1})},a.prototype.storeNewAnimation=function(e,i,n){if(n.animations.length>0){var a=this.getActiveLayer().animation;a.setTransformOrigin(e,n.transformOrigin),a.setRepeatable(n.repeatable),"in"==e?(a.setSpecialZero(e,n.specialZero),a.setEvent(e,"PlayEvent",n.playEvent)):"loop"==e?(a.setRepeatCount(e,n.repeatCount),a.setRepeatStartDelay(e,n.repeatStartDelay),a.setEvent(e,"PlayEvent",n.playEvent),a.setEvent(e,"PauseEvent",n.pauseEvent),a.setEvent(e,"StopEvent",n.stopEvent)):"out"==e&&(a.setEvent(e,"PlayEvent",n.playEvent),a.setInstantOut(n.instantOut));for(var s=0;s<n.animations.length;s++)a.addAnimation(e,n.animations[s]);this.update(e),t(window).triggerHandler("AnimationAdded")}this.update(e)},a.prototype.activateAnimations=function(e){e.inRows.prependTo(this["in"].list),e.loopRows.prependTo(this.loop.list),e.outRows.prependTo(this.out.list),this.update("in"),this.update("loop"),this.update("out")},a.prototype.update=function(e){this[e].list.children().length?(this[e].add.css("display","none"),this[e].clear.css("display","")):(this[e].add.css("display",""),this[e].clear.css("display","none"))},i.NextendSmartSliderLayerAnimationManager=a}(nextend.smartSlider,n2,window),function(e,t,i,n){function a(e){this._loaded=!1,this.active=!1,this.layer=e,this.data=null,e.layer.data("adminLayerAnimations",this),this.inRows=t(),this.loopRows=t(),this.outRows=t()}var s={repeatable:0,"in":[],specialZeroIn:0,transformOriginIn:"50|*|50|*|0",inPlayEvent:"",loop:[],repeatCount:0,repeatStartDelay:0,transformOriginLoop:"50|*|50|*|0",loopPlayEvent:"",loopPauseEvent:"",loopStopEvent:"",out:[],transformOriginOut:"50|*|50|*|0",outPlayEvent:"",instantOut:1};a.prototype.deActivate=function(){this.active=!1,this.inRows.detach(),this.loopRows.detach(),this.outRows.detach()},a.prototype.activate=function(){this.active=!0,e.layerAnimationManager.activateAnimations(this)},a.prototype.addAnimation=function(t,i){var n=new NextendSmartSliderLayerAnimation(this,t,i),a=n.getRow();this[t+"Rows"]=this[t+"Rows"].add(a),this.active&&a.appendTo(e.layerAnimationManager[t].list),this.layer.$.trigger("layerAnimationAdded",[t,n])},a.prototype.removeAnimation=function(e){var t=e.group;this[t+"Rows"]=this[t+"Rows"].not(e.row)},a.prototype.clearAll=function(){this._startHistory(),this._clear("in"),this._clear("loop"),this._clear("out"),this._endHistory()},a.prototype.clear=function(e){this._startHistory(),this._clear(e),this._endHistory()},a.prototype._clear=function(e){for(var t=this[e+"Rows"],i=0;i<t.length;i++)t.eq(i).data("animation")["delete"]()},a.prototype.getCurrentData=function(e){for(var t=[],i=0;i<this[e+"Rows"].length;i++)t.push(this[e+"Rows"].eq(i).data("animation").data);var n={animations:t,transformOrigin:this.data["transformOrigin"+this.ucfirst(e)],repeatable:this.data.repeatable};return"in"==e?(n.specialZero=this.data.specialZeroIn,n.playEvent=this.data.inPlayEvent):"loop"==e?(n.repeatCount=this.data.repeatCount,n.repeatStartDelay=this.data.repeatStartDelay,n.playEvent=this.data.loopPlayEvent,n.pauseEvent=this.data.loopPauseEvent,n.stopEvent=this.data.loopStopEvent):"out"==e&&(n.playEvent=this.data.outPlayEvent,n.instantOut=this.data.instantOut),n},a.prototype.edit=function(e,i){for(var n=[],a=0;a<this[e+"Rows"].length;a++)n.push(this[e+"Rows"].eq(a).data("animation").data);var s=nextend.animationManager;s.controller.setPreviewSize(this.layer.layer.width(),this.layer.layer.height()).setGroup(e);var r={repeatable:1},o={animations:n,transformOrigin:this.data["transformOrigin"+this.ucfirst(e)],repeatable:this.data.repeatable};"in"==e?(r.specialZero=1,o.specialZero=this.data.specialZeroIn,r.playEvent=1,o.playEvent=this.data.inPlayEvent,s.changeSetById(1e3),s.setTitle(n2_("In animation"))):"loop"==e?(r.repeat=1,o.repeatCount=this.data.repeatCount,o.repeatStartDelay=this.data.repeatStartDelay,r.playEvent=1,o.playEvent=this.data.loopPlayEvent,r.pauseEvent=1,o.pauseEvent=this.data.loopPauseEvent,r.stopEvent=1,o.stopEvent=this.data.loopStopEvent,s.changeSetById(1200),s.setTitle(n2_("Loop animation"))):"out"==e&&(r.playEvent=1,r.instantOut=1,o.playEvent=this.data.outPlayEvent,o.instantOut=this.data.instantOut,s.changeSetById(1e3),s.setTitle(n2_("Out animation"))),s.show(r,o,t.proxy(this.storeAnimations,this,e,o),{previewMode:!1,previewHTML:!1}),i>0&&s.controller.tabField.options.eq(i).trigger("click")},a.prototype.storeAnimations=function(i,n,a,s){e.history.add(t.proxy(function(){return[this.layer,"storeAnimations",t.extend(!0,{},s),t.extend(!0,{},n),[i]]},this));var r=0,o=this[i+"Rows"];for(this.setTransformOrigin(i,s.transformOrigin),this.setRepeatable(s.repeatable),"in"==i?(this.setSpecialZero(i,s.specialZero),this.setEvent(i,"PlayEvent",s.playEvent)):"loop"==i?(this.setRepeatCount(i,s.repeatCount),this.setRepeatStartDelay(i,s.repeatStartDelay),this.setEvent(i,"PlayEvent",s.playEvent),this.setEvent(i,"PauseEvent",s.pauseEvent),this.setEvent(i,"StopEvent",s.stopEvent)):"out"==i&&(this.setEvent(i,"PlayEvent",s.playEvent),this.setInstantOut(s.instantOut));r<s.animations.length&&r<o.length;r++)o.eq(r).data("animation").save(s.animations[r]);for(;r<s.animations.length;r++)this.addAnimation(i,s.animations[r]);for(;r<o.length;r++)o.eq(r).data("animation")["delete"]();e.layerAnimationManager.update(i)},a.prototype.load=function(){if(this._loaded===!1){var e=this.layer.layer.data("animations");this.data={},t.extend(this.data,s),"undefined"!=typeof e&&t.extend(this.data,t.parseJSON(Base64.decode(e))),this._load("in"),this._load("loop"),this._load("out"),this._loaded=!0}},a.prototype._load=function(e){if("undefined"!=typeof this.data[e]){for(var t=0;t<this.data[e].length;t++)this.addAnimation(e,this.data[e][t]);delete this.data[e]}},a.prototype.getAnimationsCode=function(){if(this._loaded===!1)return this.layer.layer.data("animations");for(var e=t.extend({},this.data,{"in":[],loop:[],out:[]}),i=0;i<this.inRows.length;i++){var n=this.inRows.eq(i).data("animation");e["in"].push(n.data)}for(var i=0;i<this.loopRows.length;i++){var n=this.loopRows.eq(i).data("animation");e.loop.push(n.data)}for(var i=0;i<this.outRows.length;i++){var n=this.outRows.eq(i).data("animation");e.out.push(n.data)}return Base64.encode(JSON.stringify(e))},a.prototype._startHistory=function(){this._oldData={"in":t.extend(!0,{},this.getCurrentData("in")),loop:t.extend(!0,{},this.getCurrentData("loop")),out:t.extend(!0,{},this.getCurrentData("out"))}},a.prototype._endHistory=function(){var i={"in":this.getCurrentData("in"),loop:this.getCurrentData("loop"),out:this.getCurrentData("out")};for(var n in i)e.history.add(t.proxy(function(){return[this.layer,"storeAnimations",t.extend(!0,{},i[n]),t.extend(!0,{},this._oldData[n]),[n]]},this));this._oldData=null},a.prototype.loadData=function(e){this._startHistory(),this._clear("in"),this._clear("loop"),this._clear("out"),this.data={},t.extend(this.data,s),t.extend(this.data,e),this._load("in"),this._load("loop"),this._load("out"),this._endHistory()},a.prototype.getData=function(){for(var e=t.extend({},this.data,{"in":[],loop:[],out:[]}),i=0;i<this.inRows.length;i++){var n=this.inRows.eq(i).data("animation");e["in"].push(t.extend(!0,{},n.data))}for(var i=0;i<this.loopRows.length;i++){var n=this.loopRows.eq(i).data("animation");e.loop.push(t.extend(!0,{},n.data))}for(var i=0;i<this.outRows.length;i++){var n=this.outRows.eq(i).data("animation");e.out.push(t.extend(!0,{},n.data))}return e},a.prototype.setSpecialZero=function(e,t){t=parseInt(t)?1:0,t!=this.data["transformOrigin"+this.ucfirst(e)]&&(this.data.specialZeroIn=t,this.layer.$.trigger("layerAnimationSpecialZeroInChanged"))},a.prototype.setRepeatCount=function(e,t){this.data.repeatCount=t},a.prototype.setRepeatStartDelay=function(e,t){this.data.repeatStartDelay=t},a.prototype.setEvent=function(e,t,i){this.data[e+t]=i},a.prototype.setTransformOrigin=function(e,t){this.data["transformOrigin"+this.ucfirst(e)]=t},a.prototype.setRepeatable=function(e){this.data.repeatable=parseInt(e)?1:0},a.prototype.setInstantOut=function(e){this.data.instantOut=parseInt(e)?1:0},a.prototype.ucfirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},i.NextendSmartSliderLayerAnimations=a}(nextend.smartSlider,n2,window),function(e,t,i,n){function a(e,i,n,a){if(this.isDeleted=!1,this._triggerLayerResizedThrottled=NextendThrottle(this._triggerLayerResized,30),this.doThrottledTheResize=this.doTheResize,this.eye=!1,this.lock=!1,this.parent=!1,this.parentIsVisible=!0,this.$=t(this),this.layerEditor=e,this.timelineLayer=null,i){this.property={id:i.attr("id"),"class":i.data("class"),parentid:i.data("parentid"),parentalign:i.data("desktopportraitparentalign"),parentvalign:i.data("desktopportraitparentvalign"),name:i.data("name")+"",nameSynced:i.data("namesynced"),crop:i.data("crop"),inneralign:i.data("inneralign"),parallax:i.data("parallax"),align:i.data("desktopportraitalign"),valign:i.data("desktopportraitvalign"),fontsize:i.data("desktopportraitfontsize"),adaptivefont:i.data("adaptivefont"),desktopPortrait:parseFloat(i.data("desktopportrait")),desktopLandscape:parseFloat(i.data("desktoplandscape")),tabletPortrait:parseFloat(i.data("tabletportrait")),tabletLandscape:parseFloat(i.data("tabletlandscape")),mobilePortrait:parseFloat(i.data("mobileportrait")),mobileLandscape:parseFloat(i.data("mobilelandscape")),left:parseInt(i.data("desktopportraitleft")),top:parseInt(i.data("desktopportraittop")),responsiveposition:parseInt(i.data("responsiveposition")),responsivesize:parseInt(i.data("responsivesize")),mouseenter:i.data("mouseenter"),click:i.data("click"),mouseleave:i.data("mouseleave"),play:i.data("play"),pause:i.data("pause"),stop:i.data("stop")};var s=i.data("desktopportraitwidth");this.isDimensionPropertyAccepted(s)?this.property.width=s:this.property.width=parseInt(s);var r=i.data("desktopportraitheight");this.isDimensionPropertyAccepted(r)?this.property.height=r:this.property.height=parseInt(r)}else i=t('<div class="n2-ss-layer" style="z-index: '+e.zIndexList.length+';"></div>').appendTo(e.layerContainerElement),this.property=t.extend({id:null,"class":"",parentid:null,parentalign:"center",parentvalign:"middle",name:"New layer",nameSynced:1,crop:"visible",inneralign:"left",parallax:0,align:"center",valign:"middle",fontsize:100,adaptivefont:0,desktopPortrait:1,desktopLandscape:1,tabletPortrait:1,tabletLandscape:1,mobilePortrait:1,mobileLandscape:1,left:0,top:0,responsiveposition:1,width:"auto",height:"auto",responsivesize:1,mouseenter:o,click:o,mouseleave:o,play:o,pause:o,stop:o},a);this.property.id||(this.property.id=null),this.subscribeParentCallbacks={},this.property.parentid?this.subscribeParent():this.property.parentid=null,this.property.parentalign||(this.property.parentalign="center"),this.property.parentvalign||(this.property.parentvalign="middle"),"undefined"==typeof this.property.nameSynced&&(this.property.nameSynced=1),"undefined"==typeof this.property.responsiveposition&&(this.property.responsiveposition=1),"undefined"==typeof this.property.responsivesize&&(this.property.responsivesize=1),this.property.inneralign||(this.property.inneralign="left"),this.property.crop||(this.property.crop="visible"),this.property.parallax||(this.property.parallax=0),"undefined"==typeof this.property.fontsize&&(this.property.fontsize=100),"undefined"==typeof this.property.adaptivefont&&(this.property.adaptivefont=0),this.property.align||(this.property.align="left"),this.property.valign||(this.property.valign="top"),i.attr("data-align",this.property.align),i.attr("data-valign",this.property.valign),this.layer=i.data("layerObject",this),this.layer.css("visibility","hidden"),
this.zIndex=parseInt(this.layer.css("zIndex")),isNaN(this.zIndex)&&(this.zIndex=0);var l=i.data("eye"),d=i.data("lock");null!==l&&"undefined"!=typeof l&&(this.eye=!!l),null!==d&&"undefined"!=typeof d&&(this.lock=!!d),this.deviceProperty={desktopPortrait:{left:this.property.left,top:this.property.top,width:this.property.width,height:this.property.height,align:this.property.align,valign:this.property.valign,parentalign:this.property.parentalign,parentvalign:this.property.parentvalign,fontsize:this.property.fontsize},desktopLandscape:{left:i.data("desktoplandscapeleft"),top:i.data("desktoplandscapetop"),width:i.data("desktoplandscapewidth"),height:i.data("desktoplandscapeheight"),align:i.data("desktoplandscapealign"),valign:i.data("desktoplandscapevalign"),parentalign:i.data("desktoplandscapeparentalign"),parentvalign:i.data("desktoplandscapeparentvalign"),fontsize:i.data("desktoplandscapefontsize")},tabletPortrait:{left:i.data("tabletportraitleft"),top:i.data("tabletportraittop"),width:i.data("tabletportraitwidth"),height:i.data("tabletportraitheight"),align:i.data("tabletportraitalign"),valign:i.data("tabletportraitvalign"),parentalign:i.data("tabletportraitparentalign"),parentvalign:i.data("tabletportraitparentvalign"),fontsize:i.data("tabletportraitfontsize")},tabletLandscape:{left:i.data("tabletlandscapeleft"),top:i.data("tabletlandscapetop"),width:i.data("tabletlandscapewidth"),height:i.data("tabletlandscapeheight"),align:i.data("tabletlandscapealign"),valign:i.data("tabletlandscapevalign"),parentalign:i.data("tabletlandscapeparentalign"),parentvalign:i.data("tabletlandscapeparentvalign"),fontsize:i.data("tabletlandscapefontsize")},mobilePortrait:{left:i.data("mobileportraitleft"),top:i.data("mobileportraittop"),width:i.data("mobileportraitwidth"),height:i.data("mobileportraitheight"),align:i.data("mobileportraitalign"),valign:i.data("mobileportraitvalign"),parentalign:i.data("mobileportraitparentalign"),parentvalign:i.data("mobileportraitparentvalign"),fontsize:i.data("mobileportraitfontsize")},mobileLandscape:{left:i.data("mobilelandscapeleft"),top:i.data("mobilelandscapetop"),width:i.data("mobilelandscapewidth"),height:i.data("mobilelandscapeheight"),align:i.data("mobilelandscapealign"),valign:i.data("mobilelandscapevalign"),parentalign:i.data("mobilelandscapeparentalign"),parentvalign:i.data("mobilelandscapeparentvalign"),fontsize:i.data("mobilelandscapefontsize")}},this.layersItemsElement=e.layersItemsElement,this.layersItemsUlElement=this.layersItemsElement.find("> ul"),this.createRow(),this.itemEditor=n,this.initItems(),this.___makeLayerAlign(),this.___makeLayerResizeable(),this.___makeLayerDraggable(),e.layerList.push(this),"undefined"==typeof e.zIndexList[this.zIndex]?e.zIndexList[this.zIndex]=this:e.zIndexList.splice(this.zIndex,0,this),this._lock(),this.animation=new NextendSmartSliderLayerAnimations(this),this.layerEditor.$.trigger("layerCreated",this),t(window).triggerHandler("layerCreated"),this.animation.load(),this.layer.on({mousedown:t.proxy(this.activate,this),dblclick:t.proxy(this.fit,this)}),setTimeout(t.proxy(function(){this._resize(!0),this._eye()},this),300)}var s=!1,r=null;window.nextendPreventClick=!1;var o,l=function(){var e=0;return window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){var i,n=(new Date).getTime();return i=Math.max(0,16-(n-e)),e=n+i,setTimeout(function(){t(n+i)},i)}}(),d={raf:!1,ratios:null,isThrottled:!1,layers:[]},p=function(){d.raf===!1&&(d.raf=!0,l(function(){for(var e=0;e<d.layers.length;e++)d.layers[e].isDeleted||d.layers[e].doTheResize(d.ratios,!0,d.isThrottled);d={raf:!1,ratios:null,isThrottled:!1,layers:[]}}))};a.prototype.getIndex=function(){return this.layerEditor.layerList.indexOf(this)},a.prototype.getParent=function(){return t("#"+this.getProperty(!1,"parentid")).data("layerObject")},a.prototype.requestID=function(){var e=this.getProperty(!1,"id");return e||(e=t.fn.uid(),this.setProperty("id",e,"layer")),e},a.prototype.createRow=function(){var e=300,i=null,n=t('<a class="n2-ss-parent-unlink" href="#" onclick="return false;"><i class="n2-i n2-i-layerunlink n2-i-grey-opacity"></i></a>').on("click",t.proxy(this.unlink,this)),a=t('<a href="#" onclick="return false;"><i class="n2-i n2-i-delete n2-i-grey-opacity"></i></a>').on("click",t.proxy(this["delete"],this)),s=t('<a href="#" onclick="return false;"><i class="n2-i n2-i-duplicate n2-i-grey-opacity"></i></a>').on("click",t.proxy(this.duplicate,this,!0,!1));this.soloElement=t('<a href="#" onclick="return false;"><i class="n2-i n2-i-bulb n2-i-grey-opacity"></i></a>').css("opacity",.3).on("click",t.proxy(this.switchSolo,this)),this.eyeElement=t('<a href="#" onclick="return false;"><i class="n2-i n2-i-eye n2-i-grey-opacity"></i></a>').on("click",t.proxy(this.switchEye,this)),this.lockElement=t('<a href="#" onclick="return false;"><i class="n2-i n2-i-lock n2-i-grey-opacity"></i></a>').on("click",t.proxy(this.switchLock,this)),this.layerRow=t('<li class="n2-ss-layer-row"></li>').on({mouseenter:t.proxy(function(){this.layer.addClass("n2-highlight")},this),mouseleave:t.proxy(function(e){this.layer.removeClass("n2-highlight")},this)}).appendTo(this.layersItemsUlElement),this.layerTitleSpan=t('<span class="n2-ucf">'+this.property.name+"</span>").on({mouseup:t.proxy(function(n){i?(clearTimeout(i),i=null,this.editName()):i=setTimeout(t.proxy(function(){this.activate(),i=null},this),e)},this)}),this.layerTitle=t('<div class="n2-ss-layer-title"></div>').append(this.layerTitleSpan).append(t('<div class="n2-actions"></div>').append(n).append(s).append(a)).append(t('<div class="n2-actions-left"></div>').append(this.eyeElement).append(this.soloElement).append(this.lockElement)).appendTo(this.layerRow).on({mouseup:t.proxy(function(e){"DIV"===e.target.tagName&&this.activate()},this)}),this.editorVisibilityChange()},a.prototype.editorVisibilityChange=function(){switch(this.layersItemsUlElement.children().length){case 0:t("body").removeClass("n2-has-layers");break;case 1:t("body").addClass("n2-has-layers")}},a.prototype.setZIndex=function(e){this.zIndex=e,this.layer.css("zIndex",e),this.layersItemsUlElement.append(this.layerRow),this.$.trigger("layerIndexed",e)},a.prototype.activate=function(e){document.activeElement&&document.activeElement.blur(),0==this.items.length?console.error("The layer do not have item on it!"):this.items[0].activate();var t=this.getIndex();if(this.layerEditor.activeLayerIndex!==t){this.layerRow.addClass("n2-active"),this.layer.triggerHandler("n2-ss-activate"),this.layerEditor.changeActiveLayer(t),nextend.activeLayer=this.layer;var i=this.layersItemsUlElement.parent(),n=i.scrollTop(),a=this.layerRow.get(0).offsetTop;(n>a||a>n+i.height()-this.layerRow.height())&&i.scrollTop(a),r&&(s.removeClass("n2-highlight2"),clearTimeout(r),r=null),s=this.layer.addClass("n2-highlight2"),r=setTimeout(function(){s.removeClass("n2-highlight2"),s=null,r=null},500)}},a.prototype.deActivate=function(){this.animation&&this.animation.deActivate(),this.layerRow.removeClass("n2-active"),this.layer.triggerHandler("n2-ss-deactivate")},a.prototype.fit=function(){var e=this.layer.get(0);this.layerEditor.slideSize,this.layer.position();if(e.scrollWidth>0&&e.scrollHeight>0){for(var t=!1,i=0;i<this.items.length&&!(t=this.items[i].parser.fitLayer(this.items[i]));i++);if(!t){this.setProperty("width","auto","layer"),this.setProperty("height","auto","layer");var n=this.layer.width();Math.abs(this.layerEditor.layerContainerElement.width()-this.layer.position().left-n)<2&&this.setProperty("width",n,"layer")}}},a.prototype.switchToAnimation=function(){e.sidebarManager.switchTab(1)},a.prototype.hide=function(e){this.store(!1,e?e:this.getMode(),0,!0)},a.prototype.show=function(e){this.store(!1,e?e:this.getMode(),1,!0)},a.prototype.switchSolo=function(){this.layerEditor.setSolo(this)},a.prototype.markSolo=function(){this.soloElement.css("opacity",1),this.layer.addClass("n2-ss-layer-solo")},a.prototype.unmarkSolo=function(){this.soloElement.css("opacity",.3),this.layer.removeClass("n2-ss-layer-solo")},a.prototype.switchEye=function(){this.eye=!this.eye,this._eye()},a.prototype._eye=function(){this.eye?(this.eyeElement.css("opacity",.3),this.layer.css("visibility","hidden")):(this.eyeElement.css("opacity",1),this.layer.css("visibility",""))},a.prototype._hide=function(){this.layer.css("display","none")},a.prototype._show=function(){parseInt(this.property[this.layerEditor.getMode()])&&this.layer.css("display","block")},a.prototype.switchLock=function(){this.lock=!this.lock,this._lock()},a.prototype._lock=function(){this.lock?(this.lockElement.css("opacity",1),this.layer.nextenddraggable("disable"),this.layer.nextendResizable("disable"),this.layer.addClass("n2-ss-layer-locked")):(this.lockElement.css("opacity",.3),this.layer.nextenddraggable("enable"),this.layer.nextendResizable("enable"),this.layer.removeClass("n2-ss-layer-locked"))},a.prototype.duplicate=function(i,n,a){var s=this.getHTML(!0,!1),r=s.attr("id");r&&(r=t.fn.uid(),s.attr("id",r)),n&&s.attr("data-parentid",n);var o=this.layerEditor._addLayer(s,!0);"undefined"==typeof a?a=[]:a.push(o),this.layer.triggerHandler("LayerDuplicated",[r,a]),this.layerRow.trigger("mouseleave"),i&&o.activate(),n||e.history.add(t.proxy(function(){return[this,"duplicateLayer","duplicate","delete",[o]]},this))},a.prototype["delete"]=function(i,n){e.history.add(t.proxy(function(){return[this,"deleteLayer","delete","create",[this.getData(!0)]]},this)),this.deActivate();for(var a=0;a<this.items.length;a++)this.items[a]["delete"]();this.layerEditor.zIndexList.splice(this.zIndex,1);var s=this.getProperty(!1,"parentid");s&&this.unSubscribeParent(!0),this.layer.trigger("mouseup"),this.layerEditor.layerDeleted(this.getIndex()),"undefined"==typeof n?n=[]:n.push(this),this.layer.triggerHandler("LayerDeleted",["undefined"!=typeof i?i:!1,n]),this.layer.remove(),this.layerRow.remove(),this.editorVisibilityChange(),this.$.trigger("layerDeleted"),delete this.layer,delete this.itemEditor,delete this.animation,this.isDeleted=!0},a.prototype.getHTML=function(e,i){var n=t('<div class="n2-ss-layer"></div>').attr("style",this.getStyleText());for(var a in this.property)"width"!=a&&"height"!=a&&"left"!=a&&"top"!=a&&n.attr("data-"+a.toLowerCase(),this.property[a]);for(var a in this.deviceProperty)for(var s in this.deviceProperty[a])n.attr("data-"+a.toLowerCase()+s,this.deviceProperty[a][s]);n.css({position:"absolute",zIndex:this.zIndex+1});for(var a in this.deviceProperty.desktop)n.css(a,this.deviceProperty.desktop[a]+"px");if(e)for(var r=0;r<this.items.length;r++)n.append(this.items[r].getHTML(i));var o=this.getProperty(!1,"id");return o&&""!=o&&n.attr("id",o),n.attr("data-eye",this.eye),n.attr("data-lock",this.lock),n.attr("data-animations",this.animation.getAnimationsCode()),n},a.prototype.getData=function(e){var t={zIndex:this.zIndex+1,eye:this.eye,lock:this.lock,animations:this.animation.getData()};for(var i in this.property)switch(i){case"width":case"height":case"left":case"top":case"align":case"valign":case"parentalign":case"parentvalign":case"fontsize":break;default:t[i.toLowerCase()]=this.property[i]}for(var n in this.deviceProperty)for(var a in this.deviceProperty[n]){var s=this.deviceProperty[n][a];"undefined"!=typeof s&&("width"==a&&this.isDimensionPropertyAccepted(s)||"height"==a&&this.isDimensionPropertyAccepted(s)||"align"==a||"valign"==a||"parentalign"==a||"parentvalign"==a||(s=parseFloat(s)),t[n.toLowerCase()+a]=s)}if(e){t.items=[];for(var r=0;r<this.items.length;r++)t.items.push(this.items[r].getData())}return t},a.prototype.getDataWithChildren=function(e){return e.push(this.getData(!0)),this.layer.triggerHandler("LayerGetDataWithChildren",[e]),e},a.prototype.initItems=function(){this.items=[];for(var e=this.layer.find(".n2-ss-item"),t=0;t<e.length;t++)this.addItem(e.eq(t),!1)},a.prototype.addItem=function(e,t){t&&e.appendTo(this.layer),new NextendSmartSliderItem(e,this,this.itemEditor)},a.prototype.editName=function(){var e=new NextendSmartSliderAdminInlineField;e.$input.on({valueChanged:t.proxy(function(e,t){this.rename(t,!0),this.layerTitleSpan.css("display","inline")},this),cancel:t.proxy(function(){this.layerTitleSpan.css("display","inline")},this)}),this.layerTitleSpan.css("display","none"),e.injectNode(this.layerTitle,this.property.name)},a.prototype.rename=function(e,t){if(this.property.nameSynced||t){if(t&&(this.property.nameSynced=0),""==e){if(t&&(this.property.nameSynced=1,this.items.length))return this.items[0].reRender(),!1;e="Layer #"+(this.layerEditor.layerList.length+1)}e=e.substr(0,35),this.property.name!=e&&(this.property.name=e,this.layerTitleSpan.html(e),this.$.trigger("layerRenamed",e))}},a.prototype.setProperty=function(e,t,i){switch(e){case"responsiveposition":case"responsivesize":t=parseInt(t);case"id":case"parentid":case"class":case"inneralign":case"crop":case"parallax":case"adaptivefont":case"mouseenter":case"click":case"mouseleave":case"play":case"pause":case"stop":this.store(!1,e,t,!0);break;case"parentalign":case"parentvalign":case"align":case"valign":case"fontsize":this.store(!0,e,t,!0);break;case"width":var n=this.layerEditor.getResponsiveRatio("h");parseInt(this.getProperty(!1,"responsivesize"))||(n=1);var a=t;this.isDimensionPropertyAccepted(t)||(a=~~t,a!=t&&this.$.trigger("propertyChanged",[e,a])),this.storeWithModifier(e,a,n,!0),this._resize(!1);break;case"height":var s=this.layerEditor.getResponsiveRatio("v");parseInt(this.getProperty(!1,"responsivesize"))||(s=1);var a=t;this.isDimensionPropertyAccepted(t)||(a=~~t,a!=t&&this.$.trigger("propertyChanged",[e,a])),this.storeWithModifier(e,a,s,!0),this._resize(!1);break;case"left":var r=this.layerEditor.getResponsiveRatio("h");parseInt(this.getProperty(!1,"responsiveposition"))||(r=1);var a=~~t;a!=t&&this.$.trigger("propertyChanged",[e,a]),this.storeWithModifier(e,a,r,!0);break;case"top":var o=this.layerEditor.getResponsiveRatio("v");parseInt(this.getProperty(!1,"responsiveposition"))||(o=1);var a=~~t;a!=t&&this.$.trigger("propertyChanged",[e,a]),this.storeWithModifier(e,a,o,!0);break;case"showFieldDesktopPortrait":this.store(!1,"desktopPortrait",parseInt(t),!0);break;case"showFieldDesktopLandscape":this.store(!1,"desktopLandscape",parseInt(t),!0);break;case"showFieldTabletPortrait":this.store(!1,"tabletPortrait",parseInt(t),!0);break;case"showFieldTabletLandscape":this.store(!1,"tabletLandscape",parseInt(t),!0);break;case"showFieldMobilePortrait":this.store(!1,"mobilePortrait",parseInt(t),!0);break;case"showFieldMobileLandscape":this.store(!1,"mobileLandscape",parseInt(t),!0)}"manager"!=i&&this.$.trigger("propertyChanged",[e,t])},a.prototype.getProperty=function(e,t){if(e){var i=this.deviceProperty[this.getMode()],n=this.deviceProperty.desktopPortrait;if("undefined"!=typeof i[t])return i[t];if("undefined"!=typeof n[t])return n[t]}return this.property[t]},a.prototype.store=function(i,n,a,s){var r=this.property[n];if(this.property[n]=a,i){var o=this.getMode();e.history.add(t.proxy(function(){return[this,"store",a,this.deviceProperty[o][n],[this.layer,i,n,o]]},this)),this.deviceProperty[o][n]=a}else e.history.add(t.proxy(function(){return[this,"store",a,r,[this.layer,i,n,this.getMode()]]},this));s&&this.render(n,a)},a.prototype.storeWithModifier=function(i,n,a,s){this.property[i]=n;var r=this.getMode();e.history.add(t.proxy(function(){return[this,"storeWithModifier",n,this.deviceProperty[r][i],[this.layer,i,r]]},this)),this.deviceProperty[r][i]=n,s&&this.renderWithModifier(i,n,a)},a.prototype.render=function(e,t){this["_sync"+e](t)},a.prototype.renderWithModifier=function(e,t,i){"width"!=e&&"height"!=e||!this.isDimensionPropertyAccepted(t)?this["_sync"+e](Math.round(t*i)):this["_sync"+e](t)},a.prototype._syncclass=function(e){this.layer.removeClass(),this.layer.addClass("n2-ss-layer"),e&&""!=e&&this.layer.addClass(e)},a.prototype._syncid=function(e){e&&""!=e?this.layer.attr("id",e):this.layer.removeAttr("id")},a.prototype.subscribeParent=function(){var e=this;this.subscribeParentCallbacks={LayerResized:function(){e.resizeParent.apply(e,arguments)},LayerParent:function(){e.layer.addClass("n2-ss-layer-parent"),e.layer.triggerHandler("LayerParent")},LayerUnParent:function(){e.layer.removeClass("n2-ss-layer-parent"),e.layer.triggerHandler("LayerUnParent")},LayerDeleted:function(t,i,n){i?e["delete"](i,n):e.setProperty("parentid","","layer")},LayerDuplicated:function(t,i,n){e.duplicate(!1,i,n)},LayerShowChange:function(t,i,n){e.getMode()==i&&(e.parentIsVisible=n)},"n2-ss-activate":function(){e.layerRow.addClass("n2-parent-active")},"n2-ss-deactivate":function(){e.layerRow.removeClass("n2-parent-active")},LayerGetDataWithChildren:function(t,i){e.getDataWithChildren(i)}},this.parent=n2("#"+this.property.parentid).on(this.subscribeParentCallbacks)},a.prototype.unSubscribeParent=function(e){if(this.layerRow.removeClass("n2-parent-active"),this.parent&&this.parent.off(this.subscribeParentCallbacks),this.parent=!1,this.subscribeParentCallbacks={},!e){var t=this.layer.position();this.setPosition(t.left,t.top)}},a.prototype.unlink=function(e){e.preventDefault(),this.setProperty("parentid","","layer")},a.prototype.parentPicked=function(e,t,i,n,a){this.setProperty("parentid","","layer"),this.setProperty("align",n,"layer"),this.setProperty("valign",a,"layer"),this.setProperty("parentalign",t,"layer"),this.setProperty("parentvalign",i,"layer"),this.setProperty("parentid",e.requestID(),"layer")},a.prototype._syncparentid=function(e){e&&""!=e?0==t("#"+e).length?this.setProperty("parentid","","layer"):(this.layer.attr("data-parentid",e),this.subscribeParent(),this.setPosition(this.layer.position().left,this.layer.position().top)):(this.layer.removeAttr("data-parentid"),this.unSubscribeParent(!1))},a.prototype._syncparentalign=function(e){this.layer.data("parentalign",e);var t=this.getParent();t&&t._resize(!1)},a.prototype._syncparentvalign=function(e){this.layer.data("parentvalign",e);var t=this.getParent();t&&t._resize(!1)},a.prototype._syncinneralign=function(e){this.layer.css("text-align",e)},a.prototype._synccrop=function(e){"auto"==e&&(e="hidden");var i=this.layer.find("> .n2-ss-layer-mask");if("mask"==e){if(e="hidden",!i.length){i=t("<div class='n2-ss-layer-mask'></div>").appendTo(this.layer);for(var n=0;n<this.items.length;n++)i.append(this.items[n].item)}}else if(i.length)for(var n=0;n<this.items.length;n++)this.layer.append(this.items[n].item),i.remove();this.layer.css("overflow",e)},a.prototype._syncparallax=function(e){},a.prototype._syncalign=function(e,t){"undefined"!==t&&e!=t&&this.setPosition(this.layer.position().left,this.layer.position().top),this.layer.attr("data-align",e)},a.prototype._syncvalign=function(e,t){"undefined"!==t&&e!=t&&this.setPosition(this.layer.position().left,this.layer.position().top),this.layer.attr("data-valign",e)},a.prototype._syncfontsize=function(e){this.adjustFontSize(this.getProperty(!1,"adaptivefont"),e,!0)},a.prototype._syncadaptivefont=function(e){this.adjustFontSize(e,this.getProperty(!0,"fontsize"),!0)},a.prototype.adjustFontSize=function(e,t,i){t=parseInt(t),parseInt(e)?this.layer.css("font-size",nextend.smartSlider.frontend.sliderElement.data("fontsize")*t/100+"px"):100!=t?this.layer.css("font-size",t+"%"):this.layer.css("font-size",""),i&&this.update()},a.prototype._syncleft=function(e){if(this.parent&&this.parentIsVisible){var t=this.parent.position(),i=this.getProperty(!0,"align"),n=this.getProperty(!0,"parentalign"),a=0;switch(n){case"right":a=t.left+this.parent.width();break;case"center":a=t.left+this.parent.width()/2;break;default:a=t.left}switch(i){case"right":this.layer.css({left:"auto",right:this.layer.parent().width()-a-e+"px"});break;case"center":this.layer.css({left:a+e-this.layer.width()/2+"px",right:"auto"});break;default:this.layer.css({left:a+e+"px",right:"auto"})}}else switch(this.getProperty(!0,"align")){case"right":this.layer.css({left:"auto",right:-e+"px"});break;case"center":this.layer.css({left:this.layer.parent().width()/2+e-this.layer.width()/2+"px",right:"auto"});break;default:this.layer.css({left:e+"px",right:"auto"})}this.triggerLayerResized()},a.prototype._synctop=function(e){if(this.parent&&this.parentIsVisible){var t=this.parent.position(),i=this.getProperty(!0,"valign"),n=this.getProperty(!0,"parentvalign"),a=0;switch(n){case"bottom":a=t.top+this.parent.height();break;case"middle":a=t.top+this.parent.height()/2;break;default:a=t.top}switch(i){case"bottom":this.layer.css({top:"auto",bottom:this.layer.parent().height()-a-e+"px"});break;case"middle":this.layer.css({top:a+e-this.layer.height()/2+"px",bottom:"auto"});break;default:this.layer.css({top:a+e+"px",bottom:"auto"})}}else switch(this.getProperty(!0,"valign")){case"bottom":this.layer.css({top:"auto",bottom:-e+"px"});break;case"middle":this.layer.css({top:this.layer.parent().height()/2+e-this.layer.height()/2+"px",bottom:"auto"});break;default:this.layer.css({top:e+"px",bottom:"auto"})}this.triggerLayerResized()},a.prototype._syncresponsiveposition=function(e){this._resize(!1)},a.prototype._syncwidth=function(e){this.layer.css("width",e+(this.isDimensionPropertyAccepted(e)?"":"px"))},a.prototype._syncheight=function(e){this.layer.css("height",e+(this.isDimensionPropertyAccepted(e)?"":"px"))},a.prototype._syncresponsivesize=function(e){this._resize(!1)},a.prototype._syncdesktopPortrait=function(e){this.__syncShowOnDevice("desktopPortrait",e)},a.prototype._syncdesktopLandscape=function(e){this.__syncShowOnDevice("desktopLandscape",e)},a.prototype._synctabletPortrait=function(e){this.__syncShowOnDevice("tabletPortrait",e)},a.prototype._synctabletLandscape=function(e){this.__syncShowOnDevice("tabletLandscape",e)},a.prototype._syncmobilePortrait=function(e){this.__syncShowOnDevice("mobilePortrait",e)},a.prototype._syncmobileLandscape=function(e){this.__syncShowOnDevice("mobileLandscape",e)},a.prototype.__syncShowOnDevice=function(e,t){if(this.getMode()==e){var t=parseInt(t);t?this._show():this._hide(),this.layer.triggerHandler("LayerShowChange",[e,t]),this.triggerLayerResized()}},a.prototype._syncmouseenter=a.prototype._syncclick=a.prototype._syncmouseleave=a.prototype._syncplay=a.prototype._syncpause=a.prototype._syncstop=function(){},a.prototype.___makeLayerAlign=function(){this.alignMarker=t('<div class="n2-ss-layer-align-marker" />').appendTo(this.layer)},a.prototype.___makeLayerResizeable=function(){this.layer.nextendResizable({handles:"n, e, s, w, ne, se, sw, nw",_containment:this.layerEditor.layerContainerElement,start:t.proxy(this.____makeLayerResizeableStart,this),resize:t.proxy(this.____makeLayerResizeableResize,this),stop:t.proxy(this.____makeLayerResizeableStop,this),smartguides:t.proxy(function(){return this.layer.triggerHandler("LayerParent"),this.layerEditor.getSnap()},this),tolerance:5}).on({mousedown:t.proxy(function(e){this.lock||this.layerEditor.positionDisplay.css({left:e.pageX+10,top:e.pageY+10}).html("W: "+parseInt(this.layer.width())+"px<br />H: "+parseInt(this.layer.height())+"px").addClass("n2-active"),document.activeElement&&document.activeElement.blur()},this),mouseup:t.proxy(function(e){this.layerEditor.positionDisplay.removeClass("n2-active")},this)})},a.prototype.____makeLayerResizeableStart=function(e,i){t("#n2-admin").addClass("n2-ss-resize-layer"),this.____makeLayerResizeableResize(e,i),this.layerEditor.positionDisplay.addClass("n2-active")},a.prototype.____makeLayerResizeableResize=function(e,t){this.layerEditor.positionDisplay.css({left:e.pageX+10,top:e.pageY+10}).html("W: "+t.size.width+"px<br />H: "+t.size.height+"px"),this.triggerLayerResized()},a.prototype.____makeLayerResizeableStop=function(e,i){window.nextendPreventClick=!0,setTimeout(function(){window.nextendPreventClick=!1},50),t("#n2-admin").removeClass("n2-ss-resize-layer");var n=!1;if(i.originalSize.width==i.size.width){var a=this.getProperty(!0,"width");this.isDimensionPropertyAccepted(a)&&(n=!0,this._syncwidth(a))}var s=!1;if(i.originalSize.height==i.size.height){var a=this.getProperty(!0,"height");this.isDimensionPropertyAccepted(a)&&(s=!0,this._syncheight(a))}this.setPosition(i.position.left,i.position.top);var r=this.layerEditor.getResponsiveRatio("h"),o=this.layerEditor.getResponsiveRatio("v");if(parseInt(this.getProperty(!1,"responsivesize"))||(r=o=1),!n){var l=Math.round(i.size.width*(1/r));this.storeWithModifier("width",l,r,!1),this.$.trigger("propertyChanged",["width",l])}if(!s){var l=Math.round(i.size.height*(1/o));this.storeWithModifier("height",l,o,!1),this.$.trigger("propertyChanged",["height",l])}this.triggerLayerResized(),this.layer.triggerHandler("LayerUnParent"),this.layerEditor.positionDisplay.removeClass("n2-active")},a.prototype.___makeLayerDraggable=function(){this.layer.nextenddraggable({_containment:this.layerEditor.layerContainerElement,start:t.proxy(this.____makeLayerDraggableStart,this),drag:t.proxy(this.____makeLayerDraggableDrag,this),stop:t.proxy(this.____makeLayerDraggableStop,this),smartguides:t.proxy(function(){return this.layer.triggerHandler("LayerParent"),this.layerEditor.getSnap()},this),tolerance:5})},a.prototype.____makeLayerDraggableStart=function(e,i){t("#n2-admin").addClass("n2-ss-move-layer"),this.____makeLayerDraggableDrag(e,i),this.layerEditor.positionDisplay.addClass("n2-active");var n=this.getProperty(!0,"width");this.isDimensionPropertyAccepted(n)&&this.layer.width(this.layer.width()+.5);var n=this.getProperty(!0,"height");this.isDimensionPropertyAccepted(n)&&this._syncheight(n)},a.prototype.____makeLayerDraggableDrag=function(e,t){this.layerEditor.positionDisplay.css({left:e.pageX+10,top:e.pageY+10}).html("L: "+parseInt(0|t.position.left)+"px<br />T: "+parseInt(0|t.position.top)+"px"),this.triggerLayerResized()},a.prototype.____makeLayerDraggableStop=function(e,i){window.nextendPreventClick=!0,setTimeout(function(){window.nextendPreventClick=!1},50),t("#n2-admin").removeClass("n2-ss-move-layer"),this.setPosition(i.position.left,i.position.top);var n=this.getProperty(!0,"width");this.isDimensionPropertyAccepted(n)&&this._syncwidth(n);var n=this.getProperty(!0,"height");this.isDimensionPropertyAccepted(n)&&this._syncheight(n),this.triggerLayerResized(),this.layer.triggerHandler("LayerUnParent"),this.layerEditor.positionDisplay.removeClass("n2-active")},a.prototype.moveX=function(e){this.setDeviceBasedAlign(),this.setProperty("left",this.getProperty(!0,"left")+e,"layer"),this.triggerLayerResized()},a.prototype.moveY=function(e){this.setDeviceBasedAlign(),this.setProperty("top",this.getProperty(!0,"top")+e,"layer"),this.triggerLayerResized()},a.prototype.setPosition=function(e,t){var i=this.layerEditor.getResponsiveRatio("h"),n=this.layerEditor.getResponsiveRatio("v");parseInt(this.getProperty(!1,"responsiveposition"))||(i=n=1),this.setDeviceBasedAlign();var a=this.parent,s={left:0,leftMultiplier:1,top:0,topMultiplier:1};if(a&&a.is(":visible")){var r=a.position();switch(this.getProperty(!0,"parentalign")){case"right":s.left=r.left+a.width();break;case"center":s.left=r.left+a.width()/2;break;default:s.left=r.left}switch(this.getProperty(!0,"parentvalign")){case"bottom":s.top=r.top+a.height();break;case"middle":s.top=r.top+a.height()/2;break;default:s.top=r.top}}else{switch(a=this.layer.parent(),this.getProperty(!0,"align")){case"center":s.left+=a.width()/2;break;case"right":s.left+=a.width()}switch(this.getProperty(!0,"valign")){case"middle":s.top+=a.height()/2;break;case"bottom":s.top+=a.height()}}var e,o=!1;switch(this.getProperty(!0,"align")){case"left":e=-Math.round((s.left-e)*(1/i));break;case"center":e=-Math.round((s.left-e-this.layer.width()/2)*(1/i));break;case"right":e=-Math.round((s.left-e-this.layer.width())*(1/i)),o=!0}this.storeWithModifier("left",e,i,o),this.$.trigger("propertyChanged",["left",e]);var t,o=!1;switch(this.getProperty(!0,"valign")){case"top":t=-Math.round((s.top-t)*(1/n));break;case"middle":t=-Math.round((s.top-t-this.layer.height()/2)*(1/n));break;case"bottom":t=-Math.round((s.top-t-this.layer.height())*(1/n)),o=!0}this.storeWithModifier("top",t,n,o),this.$.trigger("propertyChanged",["top",t])},a.prototype.setDeviceBasedAlign=function(){var e=this.getMode();"undefined"==typeof this.deviceProperty[e].align&&this.setProperty("align",this.getProperty(!0,"align"),"layer"),"undefined"==typeof this.deviceProperty[e].valign&&this.setProperty("valign",this.getProperty(!0,"valign"),"layer")},a.prototype.snap=function(){this.layer.nextendResizable("option","smartguides",t.proxy(function(){return this.layer.triggerHandler("LayerParent"),this.layerEditor.getSnap()},this)),this.layer.nextenddraggable("option","smartguides",t.proxy(function(){return this.layer.triggerHandler("LayerParent"),this.layerEditor.getSnap()},this))},a.prototype.changeEditorMode=function(e){var t=parseInt(this.property[e]);t?this._show():this._hide(),this.layer.triggerHandler("LayerShowChange",[e,t]),this._renderModeProperties(!1)},a.prototype.resetMode=function(e,t){if("desktopPortrait"!=e){var i;for(var n in this.property)this.deviceProperty[e][n]=i;e==t&&this._renderModeProperties(!0)}},a.prototype._renderModeProperties=function(e){for(var t in this.property)this.property[t]=this.getProperty(!0,t),this.$.trigger("propertyChanged",[t,this.property[t]]);var i=this.getProperty(!0,"fontsize");this.adjustFontSize(this.getProperty(!1,"adaptivefont"),i,!1),this.layer.attr("data-align",this.property.align),this.layer.attr("data-valign",this.property.valign),e&&this._resize(!0)},a.prototype.copyMode=function(e,i){e!=i&&(this.deviceProperty[i]=t.extend({},this.deviceProperty[i],this.deviceProperty[e]))},a.prototype.getMode=function(){return this.layerEditor.getMode()},a.prototype._resize=function(e){this.resize({slideW:this.layerEditor.getResponsiveRatio("h"),slideH:this.layerEditor.getResponsiveRatio("v")},e)},a.prototype.doLinearResize=function(e){this.doThrottledTheResize(e,!0)},a.prototype.resize=function(e,t){this.parent&&!t||this.addToResizeCollection(this,e,!1)},a.prototype.doTheResize=function(e,t,i){var n=e.slideW,a=n,s=e.slideH,r=s;parseInt(this.getProperty(!1,"responsivesize"))||(a=r=1),this.renderWithModifier("width",this.getProperty(!0,"width"),a),this.renderWithModifier("height",this.getProperty(!0,"height"),r),parseInt(this.getProperty(!1,"responsiveposition"))||(n=s=1),this.renderWithModifier("left",this.getProperty(!0,"left"),n),this.renderWithModifier("top",this.getProperty(!0,"top"),s),t||this.triggerLayerResized(i,e)},a.prototype.resizeParent=function(e,t,i){this.addToResizeCollection(this,t,i)},a.prototype.addToResizeCollection=function(e,t,i){d.ratios=t,d.isThrottled=i;for(var n=0;n<d.layers.length;n++)if(d.layers[n]==this){d.layers.splice(n,1);break}d.layers.push(e),p(),this.triggerLayerResized(i,t)},a.prototype.update=function(){var e=this.parent;if("center"==this.getProperty(!0,"align")){var t=0;t=e?e.position().left+e.width()/2:this.layer.parent().width()/2;var i=this.layerEditor.getResponsiveRatio("h");parseInt(this.getProperty(!1,"responsiveposition"))||(i=1),this.layer.css("left",t-this.layer.width()/2+this.getProperty(!0,"left")*i)}if("middle"==this.getProperty(!0,"valign")){var n=0;n=e?e.position().top+e.height()/2:this.layer.parent().height()/2;var i=this.layerEditor.getResponsiveRatio("v");parseInt(this.getProperty(!1,"responsiveposition"))||(i=1),this.layer.css("top",n-this.layer.height()/2+this.getProperty(!0,"top")*i)}this.triggerLayerResized()},a.prototype.triggerLayerResized=function(e,t){e?this._triggerLayerResized(e,t):this._triggerLayerResizedThrottled(!0,t)},a.prototype._triggerLayerResized=function(e,t){this.isDeleted||this.layer.triggerHandler("LayerResized",[t||{slideW:this.layerEditor.getResponsiveRatio("h"),slideH:this.layerEditor.getResponsiveRatio("v")},e||!1])},a.prototype.getStyleText=function(){var e="",t=this.property.crop;return"auto"==t&&(t="hidden"),e+="overflow:"+t+";",e+="text-align:"+this.property.inneralign+";"},a.prototype.isDimensionPropertyAccepted=function(e){return!(!(e+"").match(/[0-9]+%/)&&"auto"!=e)},a.prototype.history=function(i,n,a,s){switch(i){case"store":var r=this.getMode();a[1]&&a[3]!=r?this.deviceProperty[a[3]][a[2]]=n:this[i](a[1],a[2],n,!0),
this._renderModeProperties(!0);break;case"storeWithModifier":var r=this.getMode(),o=1;switch(a[1]){case"width":case"left":o=this.layerEditor.getResponsiveRatio("h");break;case"height":case"top":o=this.layerEditor.getResponsiveRatio("v")}a[2]==r?this[i](a[1],n,o,!0):this.deviceProperty[a[2]][a[1]]=n,this._renderModeProperties(!0);break;case"addLayer":switch(n){case"add":this.layerEditor._zIndexOffset=-1,this.layerEditor._idTranslation={};var l=this.layerEditor.loadSingleData(t.extend(!0,{},a[0]));e.history.changeFuture(this,l),e.history.changeFuture(this.items[0],l.items[0]),this.layerEditor.reIndexLayers(),this.layerEditor.refreshMode();break;case"delete":this["delete"]()}break;case"duplicateLayer":switch(n){case"duplicate":var d=[];this.duplicate(!0,!1,d);for(var p=0;p<d.length;p++)e.history.changeFuture(s.oldLayers[p],d[p]),e.history.changeFuture(s.oldLayers[p].items[0],d[p].items[0]);s.oldLayers=[];break;case"delete":var h=[];a[0]["delete"](!0,h),s.oldLayers=h}break;case"deleteLayer":switch(n){case"create":this.layerEditor._zIndexOffset=-1,this.layerEditor._idTranslation={};var l=this.layerEditor.loadSingleData(t.extend(!0,{},a[0]));e.history.changeFuture(this,l),e.history.changeFuture(this.items[0],l.items[0]),this.layerEditor.reIndexLayers(),this.layerEditor.refreshMode();break;case"delete":this["delete"]()}break;case"storeAnimations":this.animation.storeAnimations(a[0],null,null,t.extend(!0,{},n))}},i.NextendSmartSliderLayer=a}(nextend.smartSlider,n2,window),function(e,t,i,n){function a(i,n,a,s,o){this.activeLayerIndex=-1,this.snapToEnabled=!0,this.staticSlide=n,this.layerDefault={align:null,valign:null},this.solo=!1,this.$=t(this),e.layerManager=this,this.responsive=e.frontend.responsive,new NextendSmartSliderSidebar,this.layerList=[],this.layersItemsElement=t("#n2-ss-layers-items-list"),this.frontendSlideLayers=i,this.frontendSlideLayers.setZero(),this.layerContainerElement=e.$currentSlideElement.find(".n2-ss-layers-container"),this.layerContainerElement.length||(this.layerContainerElement=e.$currentSlideElement),this.layerContainerElement.parent().prepend('<div class="n2-ss-slide-border n2-ss-slide-border-left" /><div class="n2-ss-slide-border n2-ss-slide-border-top" /><div class="n2-ss-slide-border n2-ss-slide-border-right" /><div class="n2-ss-slide-border n2-ss-slide-border-bottom" />'),this.slideSize={width:this.layerContainerElement.width(),height:this.layerContainerElement.height()},e.frontend.sliderElement.on("SliderResize",t.proxy(this.refreshSlideSize,this)),this.initToolbox(),new NextendSmartSliderLayerAnimationManager(this),this.refreshLayers(),e.itemEditor=this.itemEditor=new NextendSmartSliderItemManager(this),this.positionDisplay=t('<div class="n2 n2-ss-position-display"/>').appendTo("body"),this.zIndexList=[],this.layers.each(t.proxy(function(e,i){new NextendSmartSliderLayer(this,t(i),this.itemEditor)},this)),this.reIndexLayers(),this._makeLayersOrderable(),t("#smartslider-slide-toolbox-layer").on("mouseenter",function(){t("#n2-admin").addClass("smartslider-layer-highlight-active")}).on("mouseleave",function(){t("#n2-admin").removeClass("smartslider-layer-highlight-active")}),this._initDeviceModeChange(),this.initSnapTo(),this.initEditorTheme(),this.initAlign(),this.initParentLinker(),this.initEvents();var p=t("#n2-ss-adaptive-font").on("click",t.proxy(function(){this.toolboxForm.adaptivefont.data("field").onoff.trigger("click")},this));this.toolboxForm.adaptivefont.on("nextendChange",t.proxy(function(){1==this.toolboxForm.adaptivefont.val()?p.addClass("n2-active"):p.removeClass("n2-active")},this)),new NextendElementNumber("n2-ss-font-size",-Number.MAX_VALUE,Number.MAX_VALUE),new NextendElementAutocompleteSimple("n2-ss-font-size",["60","80","100","120","140","160","180"]);var h=t("#n2-ss-font-size").on("outsideChange",t.proxy(function(){var e=parseInt(h.val());this.toolboxForm.fontsize.val(e).trigger("change")},this));this.toolboxForm.fontsize.on("nextendChange",t.proxy(function(){h.data("field").insideChange(this.toolboxForm.fontsize.val())},this)),this.zIndexList.length>0&&this.zIndexList[this.zIndexList.length-1].activate(),t(window).on({keydown:t.proxy(function(i){if(!("TEXTAREA"==i.target.tagName||"INPUT"==i.target.tagName||e.timelineControl&&e.timelineControl.isActivated())&&-1!=this.activeLayerIndex){var n=i.keyCode;if(n>=49&&57>=n){var a=i.originalEvent.location||i.originalEvent.keyLocation||0;3==a&&(n+=48)}if(46==n)this["delete"]();else if(35==n)this.duplicate(),i.preventDefault();else if(16==n)r[n]=1;else if(38==n){if(!r[n]){var s=t.proxy(function(){this.layerList[this.activeLayerIndex].moveY(-1*(r[16]?10:1))},this);s(),r[n]=setInterval(s,100)}i.preventDefault()}else if(40==n){if(!r[n]){var s=t.proxy(function(){this.layerList[this.activeLayerIndex].moveY(r[16]?10:1)},this);s(),r[n]=setInterval(s,100)}i.preventDefault()}else if(37==n){if(!r[n]){var s=t.proxy(function(){this.layerList[this.activeLayerIndex].moveX(-1*(r[16]?10:1))},this);s(),r[n]=setInterval(s,100)}i.preventDefault()}else if(39==n){if(!r[n]){var s=t.proxy(function(){this.layerList[this.activeLayerIndex].moveX(r[16]?10:1)},this);s(),r[n]=setInterval(s,100)}i.preventDefault()}else if(n>=97&&105>=n){var o=l[n],p=d[n],h=!1;this.toolboxForm.align.val()==o&&this.toolboxForm.valign.val()==p&&(h=!0),this.horizontalAlign(o,h),this.verticalAlign(p,h)}else if(34==n){i.preventDefault();var c=this.layerList[this.activeLayerIndex].zIndex-1;0>c&&(c=this.zIndexList.length-1),this.zIndexList[c].activate()}else if(33==n){i.preventDefault();var c=this.layerList[this.activeLayerIndex].zIndex+1;c>this.zIndexList.length-1&&(c=0),this.zIndexList[c].activate()}else(i.ctrlKey||i.metaKey)&&(90==n?i.shiftKey?e.history.redo():e.history.undo():67==n?this.copy():86==n&&this.paste(0))}},this),keyup:t.proxy(function(e){"undefined"!=typeof r[e.keyCode]&&r[e.keyCode]&&(clearInterval(r[e.keyCode]),r[e.keyCode]=0)},this)}),this.addContextMenu(),a||e.frontend.sliderElement.fileupload({url:s,pasteZone:!1,dropZone:e.frontend.sliderElement,dataType:"json",paramName:"image",add:t.proxy(function(e,t){t.formData={path:"/"+o},t.submit()},this),done:t.proxy(function(e,t){var i=t.result;if(i.data&&i.data.name){var n=this.itemEditor.createLayerItem("image");n.reRender({image:i.data.url}),n.activate(null,!0)}else NextendAjaxHelper.notification(i)},this),fail:t.proxy(function(e,t){NextendAjaxHelper.notification(t.jqXHR.responseJSON)},this),start:function(){NextendAjaxHelper.startLoading()},stop:function(){setTimeout(function(){NextendAjaxHelper.stopLoading()},100)}}),this.initHideSidebar()}var s=".n2-ss-layer",r={16:0,38:0,40:0,37:0,39:0},o={left:0,center:1,right:2,top:0,middle:1,bottom:2},l={97:"left",98:"center",99:"right",100:"left",101:"center",102:"right",103:"left",104:"center",105:"right"},d={97:"bottom",98:"bottom",99:"bottom",100:"middle",101:"middle",102:"middle",103:"top",104:"top",105:"top"};a.prototype.initHideSidebar=function(){var e=t("#n2-admin");t(".n2-hide-sidebar").on("click",function(){e.hasClass("n2-sidebar-hidden")?e.removeClass("n2-sidebar-hidden"):e.addClass("n2-sidebar-hidden"),t(window).trigger("resize")})},a.prototype.getMode=function(){return this.mode},a.prototype._getMode=function(){return this.responsive.getNormalizedModeString()},a.prototype.getResponsiveRatio=function(e){return"h"==e?this.responsive.lastRatios.slideW:"v"==e?this.responsive.lastRatios.slideH:0},a.prototype.createLayer=function(e){for(var t in this.layerDefault)null!==this.layerDefault[t]&&(e[t]=this.layerDefault[t]);var i=new NextendSmartSliderLayer(this,!1,this.itemEditor,e);return this.reIndexLayers(),this._makeLayersOrderable(),i},a.prototype.addLayer=function(i,n){var a=this._addLayer(i,n);return e.history.add(t.proxy(function(){return[a,"addLayer","add","delete",[a.getData(!0)]]},this)),a},a.prototype._addLayer=function(e,i){var n=t(e);this.layerContainerElement.append(n);var a=new NextendSmartSliderLayer(this,n,this.itemEditor);return i&&(this.reIndexLayers(),this.refreshMode()),a},a.prototype.setSolo=function(t){if(this.solo){if(this.solo.unmarkSolo(),this.solo===t)return this.solo=!1,void e.$currentSlideElement.removeClass("n2-ss-layer-solo-mode");this.solo=!1}this.solo=t,t.markSolo(),e.$currentSlideElement.addClass("n2-ss-layer-solo-mode")},a.prototype.switchToLayerTab=function(){e.slide._changeView(1)},a.prototype._initDeviceModeChange=function(){var i=t("#layerresettodesktop").on("click",t.proxy(this.__onResetToDesktopClick,this));this.resetToDesktopTRElement=i.closest("tr"),this.resetToDesktopGlobalElement=t("#n2-ss-reset-to-desktop").on("click",t.proxy(function(){"table-row"==this.resetToDesktopTRElement.css("display")&&i.trigger("click")},this));var n=t("#n2-ss-show-on-device").on("click",t.proxy(function(){this.toolboxForm["showField"+this.mode.charAt(0).toUpperCase()+this.mode.substr(1)].data("field").onoff.trigger("click")},this));this.globalShowOnDeviceCB=function(e){this.mode==e&&(1==this.toolboxForm["showField"+this.mode.charAt(0).toUpperCase()+this.mode.substr(1)].val()?n.addClass("n2-active"):n.removeClass("n2-active"))},this.toolboxForm.showFieldDesktopPortrait.on("nextendChange",t.proxy(this.globalShowOnDeviceCB,this,"desktopPortrait")),this.toolboxForm.showFieldDesktopLandscape.on("nextendChange",t.proxy(this.globalShowOnDeviceCB,this,"desktopLandscape")),this.toolboxForm.showFieldTabletPortrait.on("nextendChange",t.proxy(this.globalShowOnDeviceCB,this,"tabletPortrait")),this.toolboxForm.showFieldTabletLandscape.on("nextendChange",t.proxy(this.globalShowOnDeviceCB,this,"tabletLandscape")),this.toolboxForm.showFieldMobilePortrait.on("nextendChange",t.proxy(this.globalShowOnDeviceCB,this,"mobilePortrait")),this.toolboxForm.showFieldMobileLandscape.on("nextendChange",t.proxy(this.globalShowOnDeviceCB,this,"mobileLandscape")),this.__onChangeDeviceOrientation(),e.frontend.sliderElement.on("SliderDeviceOrientation",t.proxy(this.__onChangeDeviceOrientation,this)),e.frontend.sliderElement.on("SliderResize",t.proxy(this.__onResize,this))},a.prototype.refreshMode=function(){this.__onChangeDeviceOrientation(),e.frontend.responsive.reTriggerSliderDeviceOrientation()},a.prototype.__onChangeDeviceOrientation=function(){this.mode=this._getMode(),this.globalShowOnDeviceCB(this.mode),this.resetToDesktopTRElement.css("display","desktopPortrait"==this.mode?"none":"table-row"),this.resetToDesktopGlobalElement.css("display","desktopPortrait"==this.mode?"none":"");for(var e=0;e<this.layerList.length;e++)this.layerList[e].changeEditorMode(this.mode)},a.prototype.__onResize=function(e,t){for(var i=this.getSortedLayers(),n=0;n<i.length;n++)i[n].doLinearResize(t)},a.prototype.__onResetToDesktopClick=function(){if(-1!=this.activeLayerIndex){var e=this.getMode();this.layerList[this.activeLayerIndex].resetMode(e,e)}},a.prototype.copyOrResetMode=function(e){var t=this.getMode();if("desktopPortrait"!=e&&e==t)for(var i=0;i<this.layerList.length;i++)this.layerList[i].resetMode(e,t);else if("desktopPortrait"!=e&&"desktopPortrait"==t)for(var i=0;i<this.layerList.length;i++)this.layerList[i].resetMode(e,t);else if(e!=t)for(var i=0;i<this.layerList.length;i++)this.layerList[i].copyMode(t,e)},a.prototype.refreshSlideSize=function(){this.slideSize.width=e.frontend.dimensions.slide.width,this.slideSize.height=e.frontend.dimensions.slide.height},a.prototype._makeLayersOrderable=function(){this.layersOrderableElement=this.layersItemsElement.find(" > ul"),this.layersOrderableElement.sortable({axis:"y",helper:"clone",placeholder:"sortable-placeholder",forcePlaceholderSize:!0,tolerance:"pointer",items:".n2-ss-layer-row",start:function(e,i){t(i.item).data("startindex",i.item.index())},stop:t.proxy(function(i,n){var a=this.zIndexList.length-t(n.item).data("startindex")-1,s=this.zIndexList.length-t(n.item).index()-1;a!=s&&(this.zIndexList.splice(s,0,this.zIndexList.splice(a,1)[0]),this.reIndexLayers(),e.history.add(t.proxy(function(){return[this,"changeZIndex",[a,s],[s,a],[]]},this)))},this)})},a.prototype.reIndexLayers=function(){this.zIndexList=this.zIndexList.filter(function(e){return e!=n});for(var e=this.zIndexList.length-1;e>=0;e--)this.zIndexList[e].setZIndex(e)},a.prototype.initEvents=function(){var e=t("#n2-tab-events"),i=e.find("> table").css("display","none"),n=e.find(".n2-h3"),a=n.html(),s=t('<div class="n2-sidebar-row n2-sidebar-header-bg n2-form-dark n2-sets-header"><div class="n2-table"><div class="n2-tr"><div class="n2-td"><div class="n2-h3 n2-uc">'+a+'</div></div><div style="text-align: '+(nextend.isRTL()?"left":"right")+';" class="n2-td"></div></div></div></div>'),r=t('<a href="#" class="n2-button n2-button-medium n2-button-green n2-h5 n2-uc">'+n2_("Show")+"</a>").on("click",function(e){e.preventDefault(),r.hasClass("n2-button-green")?(i.css("display",""),r.html(n2_("Hide")),r.addClass("n2-button-grey"),r.removeClass("n2-button-green"),t.jStorage.set("n2-ss-events",1)):(i.css("display","none"),r.html(n2_("Show")),r.addClass("n2-button-green"),r.removeClass("n2-button-grey"),t.jStorage.set("n2-ss-events",0))});t.jStorage.get("n2-ss-events",0)&&(i.css("display",""),r.html(n2_("Hide")),r.addClass("n2-button-grey"),r.removeClass("n2-button-green")),n.replaceWith(s),r.appendTo(s.find(".n2-td").eq(1))},a.prototype.initSnapTo=function(){var e=new NextendElementOnoff("n2-ss-snap");t.jStorage.get("n2-ss-snap-to-enabled",1)||(e.insideChange(0),this.snapToDisable()),e.element.on("outsideChange",t.proxy(this.switchSnapTo,this))},a.prototype.switchSnapTo=function(e){e.preventDefault(),this.snapToEnabled?this.snapToDisable():this.snapToEnable()},a.prototype.snapToDisable=function(){this.snapToEnabled=!1,this.snapToChanged(0)},a.prototype.snapToEnable=function(){this.snapToEnabled=!0,this.snapToChanged(1)},a.prototype.snapToChanged=function(){for(var e=0;e<this.layerList.length;e++)this.layerList[e].snap();t.jStorage.set("n2-ss-snap-to-enabled",this.snapToEnabled)},a.prototype.getSnap=function(){return this.snapToEnabled?t(this.staticSlide?".n2-ss-static-slide .n2-ss-layer:not(.n2-ss-layer-locked):not(.n2-ss-layer-parent):visible":".n2-ss-slide.n2-ss-slide-active .n2-ss-layer:not(.n2-ss-layer-locked):not(.n2-ss-layer-parent):visible"):!1},a.prototype.initEditorTheme=function(){this.themeElement=t("#n2-tab-smartslider-editor"),this.themeButton=t("#n2-ss-theme").on("click",t.proxy(this.switchEditorTheme,this)),t.jStorage.get("n2-ss-theme-dark",0)&&(this.themeButton.addClass("n2-active"),this.themeElement.addClass("n2-ss-theme-dark"))},a.prototype.switchEditorTheme=function(){t.jStorage.set("n2-ss-theme-dark",!this.themeButton.hasClass("n2-active")),this.themeButton.toggleClass("n2-active"),this.themeElement.toggleClass("n2-ss-theme-dark")},a.prototype.initAlign=function(){var e=t("#n2-ss-horizontal-align .n2-radio-option"),i=t("#n2-ss-vertical-align .n2-radio-option");e.add(i).on("click",t.proxy(function(n){if(n.ctrlKey||n.metaKey){var a=t(n.currentTarget),s=a.hasClass("n2-sub-active"),r=a.data("align");switch(r){case"left":case"center":case"right":e.removeClass("n2-sub-active"),s?(t.jStorage.set("ss-item-horizontal-align",null),this.layerDefault.align=null):(t.jStorage.set("ss-item-horizontal-align",r),this.layerDefault.align=r,a.addClass("n2-sub-active"));break;case"top":case"middle":case"bottom":i.removeClass("n2-sub-active"),s?(t.jStorage.set("ss-item-vertical-align",null),this.layerDefault.valign=null):(t.jStorage.set("ss-item-vertical-align",r),this.layerDefault.valign=r,a.addClass("n2-sub-active"))}}else if(-1!=this.activeLayerIndex){var r=t(n.currentTarget).data("align");switch(r){case"left":case"center":case"right":this.horizontalAlign(r,!0);break;case"top":case"middle":case"bottom":this.verticalAlign(r,!0)}}},this)),this.toolboxForm.align.on("nextendChange",t.proxy(function(){switch(e.removeClass("n2-active"),this.toolboxForm.align.val()){case"left":e.eq(0).addClass("n2-active");break;case"center":e.eq(1).addClass("n2-active");break;case"right":e.eq(2).addClass("n2-active")}},this)),this.toolboxForm.valign.on("nextendChange",t.proxy(function(){switch(i.removeClass("n2-active"),this.toolboxForm.valign.val()){case"top":i.eq(0).addClass("n2-active");break;case"middle":i.eq(1).addClass("n2-active");break;case"bottom":i.eq(2).addClass("n2-active")}},this));var n=t.jStorage.get("ss-item-horizontal-align",null),a=t.jStorage.get("ss-item-vertical-align",null);null!=n&&(e.eq(o[n]).addClass("n2-sub-active"),this.layerDefault.align=n),null!=a&&(i.eq(o[a]).addClass("n2-sub-active"),this.layerDefault.valign=a)},a.prototype.horizontalAlign=function(e,t){this.toolboxForm.align.val()!=e?this.toolboxForm.align.data("field").options.eq(o[e]).trigger("click"):t&&this.toolboxForm.left.val(0).trigger("change")},a.prototype.verticalAlign=function(e,t){this.toolboxForm.valign.val()!=e?this.toolboxForm.valign.data("field").options.eq(o[e]).trigger("click"):t&&this.toolboxForm.top.val(0).trigger("change")},a.prototype.initParentLinker=function(){var e=this.toolboxForm.parentid.data("field");t("#n2-ss-parent-linker").on({click:function(t){e.click(t)},mouseenter:function(t){e.picker.trigger(t)},mouseleave:function(t){e.picker.trigger(t)}})},a.prototype.deleteLayers=function(){for(var e=this.zIndexList.length-1;e>=0;e--)this.zIndexList[e]["delete"]()},a.prototype.layerDeleted=function(e){this.reIndexLayers(),this.layerList.splice(e,1),this.afterLayerDeleted(e)},a.prototype.afterLayerDeleted=NextendThrottle(function(e){var t=this.getSelectedLayer();e===this.activeLayerIndex?(this.activeLayerIndex=-1,this.zIndexList.length>0?this.zIndexList[this.zIndexList.length-1].activate():this.changeActiveLayer(-1)):t&&(this.activeLayerIndex=t.getIndex())},50),a.prototype.getSortedLayers=function(){for(var e=this.layerList.slice(),t={},i=e.length-1;i>=0;i--)"undefined"!=typeof e[i].property.parentid&&e[i].property.parentid&&("undefined"==typeof t[e[i].property.parentid]&&(t[e[i].property.parentid]=[]),t[e[i].property.parentid].push(e[i]),e.splice(i,1));for(var i=0;i<e.length;i++)"undefined"!=typeof e[i].property.id&&e[i].property.id&&"undefined"!=typeof t[e[i].property.id]&&(t[e[i].property.id].unshift(0),t[e[i].property.id].unshift(i+1),e.splice.apply(e,t[e[i].property.id]),delete t[e[i].property.id]);return e},a.prototype.getActiveLayerData=function(){var e=[];return"undefined"!=typeof this.layerList[this.activeLayerIndex]?this.layerList[this.activeLayerIndex].getDataWithChildren(e):e},a.prototype.getHTML=function(){for(var e=t("<div></div>"),i=this.layerList,n=0;n<i.length;n++)e.append(i[n].getHTML(!0,!0));return e.html()},a.prototype.getData=function(){for(var e=[],t=this.layerList,i=0;i<t.length;i++)e.push(t[i].getData(!0));return e},a.prototype.loadData=function(i,n){e.history.add(t.proxy(function(){return[this,"fixActiveLayer","","",[]]},this));var a=t.extend(!0,[],i);n&&this.deleteLayers(),this._zIndexOffset=this.zIndexList.length,this._idTranslation={};for(var s=0;s<a.length;s++)this.loadSingleData(a[s]);this.reIndexLayers(),this.refreshMode(),-1==this.activeLayerIndex&&this.layerList.length>0&&this.layerList[0].activate(),e.history.add(t.proxy(function(){return[this,"fixActiveLayer","","",[]]},this))},a.prototype.loadSingleData=function(e){var i=t('<div class="n2-ss-layer"></div>').attr("style",e.style),n=i.css("zIndex");if("auto"!=n&&""!=n||(n=e.zIndex?e.zIndex:1),i.css("zIndex",n+this._zIndexOffset),e.id){var a=t.fn.uid();this._idTranslation[e.id]=a,i.attr("id",a)}e.parentid&&("undefined"!=typeof this._idTranslation[e.parentid]?e.parentid=this._idTranslation[e.parentid]:e.parentid="");for(var s=0;s<e.items.length;s++)t('<div class="n2-ss-item n2-ss-item-'+e.items[s].type+'"></div>').data("item",e.items[s].type).data("itemvalues",e.items[s].values).appendTo(i);delete e.style,delete e.items,e.animations=Base64.encode(JSON.stringify(e.animations));for(var r in e)i.data(r,e[r]);return this.addLayer(i,!1)},a.prototype.refreshLayers=function(){this.layers=this.layerContainerElement.find(s)},a.prototype.initToolbox=function(){this.toolboxElement=t("#smartslider-slide-toolbox-layer"),this.toolboxForm={id:t("#layerid"),parentid:t("#layerparentid"),parentalign:t("#layerparentalign"),parentvalign:t("#layerparentvalign"),left:t("#layerleft"),top:t("#layertop"),responsiveposition:t("#layerresponsive-position"),width:t("#layerwidth"),height:t("#layerheight"),responsivesize:t("#layerresponsive-size"),"class":t("#layerclass"),showFieldDesktopPortrait:t("#layershow-desktop-portrait"),showFieldDesktopLandscape:t("#layershow-desktop-landscape"),showFieldTabletPortrait:t("#layershow-tablet-portrait"),showFieldTabletLandscape:t("#layershow-tablet-landscape"),showFieldMobilePortrait:t("#layershow-mobile-portrait"),showFieldMobileLandscape:t("#layershow-mobile-landscape"),crop:t("#layercrop"),inneralign:t("#layerinneralign"),parallax:t("#layerparallax"),align:t("#layeralign"),valign:t("#layervalign"),fontsize:t("#layerfont-size"),adaptivefont:t("#layeradaptive-font"),mouseenter:t("#layeronmouseenter"),click:t("#layeronclick"),mouseleave:t("#layeronmouseleave"),play:t("#layeronplay"),pause:t("#layeronpause"),stop:t("#layeronstop")};for(var e in this.toolboxForm)this.toolboxForm[e].on("outsideChange",t.proxy(this.activateLayerPropertyChanged,this,e));this.responsive.isEnabled("desktop","Landscape")||this.toolboxForm.showFieldDesktopLandscape.closest(".n2-mixed-group").css("display","none"),this.responsive.isEnabled("tablet","Portrait")||this.toolboxForm.showFieldTabletPortrait.closest(".n2-mixed-group").css("display","none"),this.responsive.isEnabled("tablet","Landscape")||this.toolboxForm.showFieldTabletLandscape.closest(".n2-mixed-group").css("display","none"),this.responsive.isEnabled("mobile","Portrait")||this.toolboxForm.showFieldMobilePortrait.closest(".n2-mixed-group").css("display","none"),this.responsive.isEnabled("mobile","Landscape")||this.toolboxForm.showFieldMobileLandscape.closest(".n2-mixed-group").css("display","none")},a.prototype.activateLayerPropertyChanged=function(e,t){if(-1!=this.activeLayerIndex){var i=this.toolboxForm[e].val();this.layerList[this.activeLayerIndex].setProperty(e,i,"manager")}else{var n=this.toolboxForm[e].data("field");"undefined"!=typeof n&&null!==n&&n.insideChange("")}},a.prototype.getSelectedLayer=function(){return-1==this.activeLayerIndex?!1:this.layerList[this.activeLayerIndex]},a.prototype.changeActiveLayer=function(e){var i=this.activeLayerIndex;if(-1!=i){var n=this.layerList[i];n&&(n.$.off("propertyChanged.layerEditor"),n.deActivate())}if(this.activeLayerIndex=e,-1!=e){var n=this.layerList[e];n.$.on("propertyChanged.layerEditor",t.proxy(this.activeLayerPropertyChanged,this)),n.animation.activate();var a=n.property;for(var s in a)this.activeLayerPropertyChanged({target:n},s,a[s])}},a.prototype.activeLayerPropertyChanged=function(e,t,i){if("function"==typeof this["_formSet"+t])this["_formSet"+t](i,e.target);else{var n=this.toolboxForm[t].data("field");"undefined"!=typeof n&&n.insideChange(i)}},a.prototype._formSetname=function(e){},a.prototype._formSetnameSynced=function(e){},a.prototype._formSetdesktopPortrait=function(e,t){this.toolboxForm.showFieldDesktopPortrait.data("field").insideChange(e)},a.prototype._formSetdesktopLandscape=function(e,t){this.toolboxForm.showFieldDesktopLandscape.data("field").insideChange(e)},a.prototype._formSettabletPortrait=function(e,t){this.toolboxForm.showFieldTabletPortrait.data("field").insideChange(e)},a.prototype._formSettabletLandscape=function(e,t){this.toolboxForm.showFieldTabletLandscape.data("field").insideChange(e)},a.prototype._formSetmobilePortrait=function(e,t){this.toolboxForm.showFieldMobilePortrait.data("field").insideChange(e)},a.prototype._formSetmobileLandscape=function(e,t){this.toolboxForm.showFieldMobileLandscape.data("field").insideChange(e)},a.prototype["delete"]=function(){"undefined"!=typeof this.layerList[this.activeLayerIndex]&&this.layerList[this.activeLayerIndex]["delete"]()},a.prototype.duplicate=function(){"undefined"!=typeof this.layerList[this.activeLayerIndex]&&this.layerList[this.activeLayerIndex].duplicate(!0,!1)},a.prototype.copy=function(e){"undefined"==typeof e&&(e=this.getCopied());var i=nextend.smartSlider.layerManager.getActiveLayerData();if(i.length){for(e.unshift({name:i[0].name,layers:i});e.length>5;)e.pop();t.jStorage.set("copied",JSON.stringify(e))}},a.prototype.paste=function(e,t){"undefined"==typeof t&&(t=this.getCopied()),t.length&&"undefined"!=typeof t[e]&&nextend.smartSlider.layerManager.loadData(t[e].layers,!1)},a.prototype.getCopied=function(){var e=t.jStorage.get("copied");return null===e?[]:JSON.parse(e)},a.prototype.addContextMenu=function(){var e=this;t.contextMenu({selector:"#n2-ss-0",build:function(i,n){var a={};"undefined"!=typeof e.layerList[e.activeLayerIndex]&&(a["delete"]={name:"Delete layer",icon:"delete"},a.duplicate={name:"Duplicate layer",icon:"duplicate"},a.copy={name:"Copy layer",icon:"copy"});var s=e.getCopied();if(1==s.length)a.paste={name:"Paste layer",icon:"paste",callback:t.proxy(e.paste,this,0,s)};else if(s.length>1){for(var r={},o=0;o<s.length;o++)r["paste"+o]={name:s[o].name,callback:t.proxy(e.paste,this,o,s)};a.paste={name:"Paste layer",icon:"paste",items:r}}return t.isEmptyObject(a)?!1:{animation:{duration:0,show:"show",hide:"hide"},zIndex:1e6,callback:function(t,i){e[t]()},positionSubmenu:function(e){if(t.ui&&t.ui.position)e.css("display","block").position({my:"left+2 top",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var i={top:0,left:this.outerWidth()};e.css(i)}},items:a}}})},a.prototype.history=function(e,t,i){switch(e){case"changeZIndex":this.zIndexList.splice(t[1],0,this.zIndexList.splice(t[0],1)[0]),this.reIndexLayers();break;case"fixActiveLayer":var n=this.getSelectedLayer();(0==n||n.isDeleted)&&-1==this.activeLayerIndex&&this.layerList.length>0&&this.zIndexList[this.zIndexList.length-1].activate()}},i.NextendSmartSliderAdminSlideLayerManager=a}(nextend.smartSlider,n2,window);